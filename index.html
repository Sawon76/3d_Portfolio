<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sawon M. Portfolio</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Three.js (Required for Floating Lines) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- GSAP (Required for Chroma Grid) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- Smooth Scrollbar -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/smooth-scrollbar/8.8.4/smooth-scrollbar.js"></script>

    <!-- Model Viewer (For 3D GLB files) -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;700&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        glass: {
                            100: 'rgba(255, 255, 255, 0.1)',
                            200: 'rgba(255, 255, 255, 0.2)',
                            border: 'rgba(255, 255, 255, 0.15)',
                            text: 'rgba(255, 255, 255, 0.9)',
                            textMuted: 'rgba(255, 255, 255, 0.6)',
                        },
                        industrial: {
                            accent: '#38bdf8', // Cyan
                            highlight: '#6366f1', // Indigo
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        serif: ['Cinzel', 'serif'],
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                        'flow': 'flow 15s ease infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        flow: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Liquid Background - Darker/Rich Blue for that premium feel */
        body {
            background: #020617; /* Solid dark base */
            color: rgba(255, 255, 255, 0.9);
            min-height: 100vh;
            /* Crucial for smooth scrollbar */
            height: 100vh;
            overflow: hidden; 
        }

        /* Smooth Scrollbar Customization */
        .scrollbar-track {
            background: transparent !important;
        }
        .scrollbar-thumb {
            background: rgba(56, 189, 248, 0.3) !important; /* Industrial Cyan */
            border-radius: 10px !important;
        }
        .scrollbar-thumb:hover {
            background: rgba(56, 189, 248, 0.6) !important;
        }

        /* --- FLOATING LINES BACKGROUND (Layer 1) --- */
        .floating-lines-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; 
            overflow: hidden;
            pointer-events: auto; 
        }

        /* --- DOCK STYLES --- */
        .dock-container {
            position: fixed;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            display: flex;
            justify-content: center;
            /* Start hidden for loading screen */
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .dock-panel {
            position: relative; /* Required for the border pseudo-element */
            display: flex;
            align-items: flex-end;
            gap: 1rem;
            padding: 0.5rem;
            background-color: rgba(255, 255, 255, 0.03); /* Match project card bg */
            backdrop-filter: blur(8px);
            border-radius: 1rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        /* Gradient Border Style (Same as Project Cards) */
        .dock-panel::before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 1rem; 
            padding: 1px; /* Border width */
            /* Cyan gradient matching the main theme */
            background: linear-gradient(145deg, #38bdf8, rgba(255,255,255,0.1), rgba(0,0,0,0)); 
            -webkit-mask: 
                linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
            opacity: 0.8;
        }

        .dock-item {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px; /* Base size */
            height: 50px; /* Base size */
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            /* Increased duration to 0.3s for smoother, slower motion */
            transition: width 0.3s cubic-bezier(0.25, 1, 0.5, 1), height 0.3s cubic-bezier(0.25, 1, 0.5, 1), background-color 0.2s;
            color: #ccc;
        }
        
        .dock-item:hover {
            background-color: rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .dock-icon {
            width: 50%;
            height: 50%;
            pointer-events: none;
        }

        .dock-label {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s, transform 0.2s;
            white-space: nowrap;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .dock-item:hover .dock-label {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* --- LOADING SCREEN STYLES --- */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000; /* Pure Black */
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 1s cubic-bezier(0.76, 0, 0.24, 1);
        }

        /* Class to slide the curtain up */
        .slide-up-exit {
            transform: translateY(-100%);
        }

        .loader-content {
            text-align: center;
            color: #ffffff;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Loading Bar Styles */
        .loader-bar-container {
            width: 200px;
            height: 2px;
            background-color: #333; 
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 2rem; /* Increased spacing */
            transition: opacity 0.3s ease;
        }

        #loader-bar {
            width: 0%;
            height: 100%;
            background-color: #ffffff; 
            transition: width 0.05s linear;
        }

        /* --- BLUR TEXT STYLES --- */
        #loader-name {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            font-weight: 700;
            letter-spacing: 0.2em;
            display: none; /* Hidden initially */
            perspective: 1000px; /* Adds depth */
        }

        /* Each character's style */
        .blur-char {
            display: inline-block;
            opacity: 0;
            filter: blur(10px);
            transform: translate3d(0, -50px, 0); /* Start from Top (-50px) */
            transition: opacity 0.8s ease, filter 0.8s ease, transform 0.8s cubic-bezier(0.2, 0.65, 0.3, 0.9);
            will-change: transform, filter, opacity;
        }

        /* The "In View" / Animated State */
        .blur-char.is-visible {
            opacity: 1;
            filter: blur(0px);
            transform: translate3d(0, 0, 0);
        }

        /* --- NEW: TOP GLOW (Event Horizon Style) --- */
        #top-glow {
            position: fixed;
            top: -100px; /* Pull up to hide top edge */
            left: 50%;
            transform: translateX(-50%);
            width: 120vw; /* Wide coverage */
            height: 200px;
            /* Intense White -> Purple -> Transparent Gradient */
            background: radial-gradient(50% 50% at 50% 50%, 
                rgba(255, 255, 255, 0.9) 0%, 
                rgba(168, 85, 247, 0.6) 20%, 
                rgba(88, 28, 135, 0.4) 50%, 
                transparent 80%);
            filter: blur(60px);
            z-index: 1; 
            pointer-events: none;
            opacity: 0.4; /* Reduced from 0.8 */
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent; 
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2); 
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4); 
        }

        /* Glass Panel Utility */
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .glass-panel-hover:hover {
            background: rgba(255, 255, 255, 0.07);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.15);
        }

        /* Input fields glass style */
        .glass-input {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(4px);
            color: white;
        }
        .glass-input:focus {
            background: rgba(0, 0, 0, 0.4);
            border-color: #38bdf8;
            outline: none;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.2);
        }

        /* Floating glow orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            z-index: -2; 
            opacity: 0.1; /* Reduced from 0.3 */
        }

        /* --- 3D CUBE STYLES (REMOVED) --- */
        /* .cube-wrapper, .cube, .cube-face styles removed */

        .blueprint-grid {
            background-image: 
                linear-gradient(rgba(56, 189, 248, 0.2) 1px, transparent 1px),
                linear-gradient(90deg, rgba(56, 189, 248, 0.2) 1px, transparent 1px);
            background-size: 20px 20px;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Model Viewer Styles */
        model-viewer {
            width: 100%;
            height: 100%;
            background-color: transparent;
            --poster-color: transparent;
        }

        /* --- CHROMA GRID STYLES --- */
        .chroma-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 2rem;
            position: relative;
            width: 100%;
        }
        @media (min-width: 768px) {
            .chroma-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (min-width: 1024px) {
            .chroma-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .chroma-card {
            position: relative;
            background: rgba(255, 255, 255, 0.05); /* Decreased transparency */
            border-radius: 1.5rem;
            padding: 1px; /* Space for gradient border */
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(32px); /* Increased from 24px */
            -webkit-backdrop-filter: blur(32px); /* Increased from 24px */
        }
        
        .chroma-card:hover {
            transform: translateY(-4px);
        }

        .chroma-card::before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 1.5rem;
            padding: 1px; 
            background: var(--card-gradient, linear-gradient(145deg, rgba(255,255,255,0.1), rgba(0,0,0,0)));
            -webkit-mask: 
                linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
            opacity: 0.5;
        }

        /* The moving spotlight gradient on the card */
        .chroma-card::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                300px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
                rgba(255, 255, 255, 0.15),
                transparent 40%
            );
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 2;
            mix-blend-mode: overlay;
        }

        .chroma-card:hover::after {
            opacity: 1;
        }

        /* Inner content wrapper */
        .chroma-content {
            background: rgba(15, 23, 42, 0.7); /* Decreased transparency */
            /* Added Grid Line Pattern */
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;

            backdrop-filter: blur(32px); 
            border-radius: 1.5rem;
            height: 100%;
            width: 100%;
            padding: 1.5rem;
            display: flex;
            flex-direction: row; /* Horizontal layout like before */
            align-items: center;
            position: relative;
            z-index: 1;
        }

        /* Spotlight effect from the GRID container (Global flashlight) */
        .chroma-overlay {
            position: absolute;
            inset: 0;
            pointer-events: none;
            background: radial-gradient(
                var(--r, 300px) circle at var(--x, 50%) var(--y, 50%), 
                rgba(56, 189, 248, 0.08), 
                transparent 40%
            );
            mix-blend-mode: screen;
            z-index: 0;
            opacity: 0; /* Hidden by default, controlled by JS */
            transition: opacity 0.6s ease;
        }

        .chroma-icon-box {
            flex-shrink: 0;
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .chroma-info {
            flex-grow: 1;
        }
        
        .chroma-info h3 {
            font-weight: 700;
            color: white;
            font-size: 1.125rem;
            line-height: 1.5rem;
        }
        
        .chroma-info .role {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.875rem;
            margin-top: 0.125rem;
        }

        .chroma-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .chroma-meta span {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.4);
        }

        .chroma-btn {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
            font-size: 0.75rem;
            color: #38bdf8;
            transition: all 0.2s;
        }
        
        .chroma-btn:hover {
            background: #38bdf8;
            color: white;
        }

        /* --- NEW: TECH PANEL STYLE (Contact Form) --- */
        .tech-panel {
            border: 1px solid rgba(56, 189, 248, 0.4) !important; /* Cyan Grid Line */
            background-image: 
                linear-gradient(rgba(56, 189, 248, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(56, 189, 248, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.1);
        }

        /* --- TARGET CURSOR STYLES REMOVED --- */
        
        /* Toast Notifications */
        .toast-container {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }
        
        .toast {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border-left: 4px solid #38bdf8;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
            pointer-events: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            max-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
    </style>
</head>
<body class="font-sans relative min-h-screen">

    <!-- LOADING SCREEN -->
    <div id="loading-screen">
        <div class="loader-content">
            <!-- Progress Bar Container -->
            <div class="loader-bar-container">
                <div id="loader-bar"></div>
            </div>
            
            <!-- Name Reveal -->
            <div id="loader-name">SAWON M.</div>
        </div>
    </div>

    <!-- Top Glow Element -->
    <div id="top-glow"></div>

    <!-- NEW: Floating Lines Background (Layer 1) -->
    <div id="floating-lines-container" class="floating-lines-container"></div>

    <!-- Ambient Background Orbs -->
    <div class="orb bg-blue-900 w-[800px] h-[800px] top-[-200px] left-[20%] animate-pulse"></div>
    
    <!-- DOCK NAVIGATION -->
    <div class="dock-container">
        <div class="dock-panel">
            <a href="#home" class="dock-item">
                <i data-lucide="home" class="dock-icon"></i>
                <span class="dock-label">Home</span>
            </a>
            
            <button onclick="document.getElementById('resume-modal').classList.remove('hidden')" class="dock-item">
                <i data-lucide="file-text" class="dock-icon"></i>
                <span class="dock-label">CV / Resume</span>
            </button>

            <a href="#projects" class="dock-item">
                <i data-lucide="briefcase" class="dock-icon"></i>
                <span class="dock-label">Projects</span>
            </a>

            <a href="#certificates" class="dock-item">
                <i data-lucide="award" class="dock-icon"></i>
                <span class="dock-label">Certificates</span>
            </a>

            <a href="#contact" class="dock-item">
                <i data-lucide="mail" class="dock-icon"></i>
                <span class="dock-label">Contact</span>
            </a>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- MAIN SCROLL CONTAINER (FOR SMOOTH SCROLLBAR) -->
    <main id="main-scroll-container" style="width: 100%; height: 100vh;">
        <!-- Hero Section -->
        <section id="home" class="relative min-h-screen flex flex-col items-center justify-center overflow-hidden pt-20">
            
            <!-- 1. Hero Image (REPLACED CUBE) -->
            <div class="relative z-20 mb-8 animate-float">
                <div class="relative w-64 h-64 md:w-80 md:h-80 rounded-3xl overflow-hidden border border-white/20 shadow-[0_0_50px_rgba(56,189,248,0.2)] group">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent z-10"></div>
                    <img src="me.jpg" 
                         alt="Profile Photo" 
                         class="w-full h-full object-cover hover:scale-110 transition-transform duration-700 ease-in-out">
                </div>
            </div>

            <!-- 2. Top Label -->
            <div class="text-center z-20 mt-8 space-y-2">
                <p class="text-industrial-accent text-xs md:text-sm font-mono uppercase tracking-[0.3em] animate-pulse">
                    Studying Industrial Engineering and Management.
                </p>
                
                <!-- 3. Name (Main Title) -->
                <h1 class="flex flex-col md:block items-center text-white font-serif font-bold tracking-tight leading-none drop-shadow-[0_0_30px_rgba(255,255,255,0.3)]">
                    <span class="text-5xl md:text-7xl lg:text-8xl">SAWON</span>
                    <span class="text-3xl md:text-7xl lg:text-8xl mt-2 md:mt-0">MUKHERJEE</span>
                </h1>

                <!-- 4. Short Description -->
                <p class="text-glass-textMuted text-xs md:text-sm font-mono uppercase tracking-[0.2em] mt-4 max-w-2xl mx-auto">
                    3D CAD Modeling • Simulation • Optimization
                </p>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center justify-center w-full mt-12 z-20">
                <button onclick="document.getElementById('resume-modal').classList.remove('hidden')" class="group relative px-8 py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                    <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                    <span class="relative text-sm font-medium tracking-widest uppercase flex items-center">
                        CV / Resume <i data-lucide="file-text" class="ml-2 w-4 h-4"></i>
                    </span>
                </button>
            </div>

            <!-- Scroll Indicator -->
            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce opacity-50">
                <span class="block w-[1px] h-12 bg-gradient-to-b from-transparent via-white to-transparent"></span>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-24 relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-end mb-12">
                    <div>
                        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl drop-shadow-lg">
                            SolidWorks Projects
                        </p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <span class="text-glass-textMuted text-sm font-mono bg-white/5 px-3 py-1 rounded-full border border-white/10 backdrop-blur-sm">Recent works from university & personal labs</span>
                    </div>
                </div>

                <!-- DYNAMIC PROJECTS CONTAINER -->
            <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- JS will render cards here -->
            </div>
            
            <div class="mt-12 text-center">
                <a href="https://grabcad.com/sawon.mukherjee-1" class="inline-flex items-center px-8 py-3 border border-white/20 shadow-lg text-base font-medium rounded-2xl text-gray-200 glass-panel hover:bg-white/10 hover:text-white hover:scale-105 transition-all" style="backdrop-filter: blur(32px); -webkit-backdrop-filter: blur(32px);">
                    <i data-lucide="github" class="mr-2 w-5 h-5"></i>
                    See more on GrabCAD
                </a>
            </div>
        </div>
    </section>

    <!-- Certificates Section -->
        <section id="certificates" class="py-24 relative overflow-hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="lg:text-center mb-16">
                    <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl drop-shadow-lg">
                        Certifications & Achievements
                    </p>
                </div>

                <!-- CHROMA GRID for Certificates -->
                <div id="chroma-container" class="chroma-grid">
                    <!-- Cards are rendered via JS in initChromaGrid() -->
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-24 relative border-t border-white/5" style="padding-bottom: 150px;">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
                    <div>
                        <h2 class="text-base text-industrial-accent font-semibold tracking-wide uppercase font-mono drop-shadow-md">Contact</h2>
                        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl mb-6 drop-shadow-lg">
                            Let's Build Something
                        </p>
                        <p class="text-lg text-glass-textMuted mb-8">
                            Looking for an internship, project collaboration, or full-time opportunity? I'm always open to discussing new industrial engineering challenges.
                        </p>
                        
                        <div class="space-y-6">
                            <div class="flex items-center group">
                                <div class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center mr-4 group-hover:bg-industrial-accent/20 transition-colors border border-white/10">
                                    <i data-lucide="mail" class="w-5 h-5 text-industrial-accent"></i>
                                </div>
                                <span class="text-gray-300 group-hover:text-white transition-colors">sawonmukherjee1@gmail.com</span>
                            </div>
                            <div class="flex items-center group">
                                <div class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center mr-4 group-hover:bg-industrial-accent/20 transition-colors border border-white/10">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-industrial-accent"></i>
                                </div>
                                <span class="text-gray-300 group-hover:text-white transition-colors">Rangpur, Bangladesh</span>
                            </div>
                            <div class="flex items-center group">
                                <div class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center mr-4 group-hover:bg-industrial-accent/20 transition-colors border border-white/10">
                                    <i data-lucide="linkedin" class="w-5 h-5 text-industrial-accent"></i>
                                </div>
                                <span class="text-gray-300 group-hover:text-white transition-colors">linkedin.com/in/sawonmukherjee</span>
                            </div>
                        </div>

                        <div class="mt-8 flex space-x-4">
                            <a href="https://www.linkedin.com/in/sawonmukherjee/" class="w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-industrial-accent hover:text-white hover:-translate-y-1 transition-all text-gray-400 backdrop-blur-sm shadow-lg">
                                <i data-lucide="linkedin" class="w-5 h-5"></i>
                            </a>
                            <a href="https://github.com/Sawon76" class="w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-industrial-accent hover:text-white hover:-translate-y-1 transition-all text-gray-400 backdrop-blur-sm shadow-lg">
                                <i data-lucide="github" class="w-5 h-5"></i>
                            </a>
                            <a href="https://www.instagram.com/sawon.mukherjee.76/" class="w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-industrial-accent hover:text-white hover:-translate-y-1 transition-all text-gray-400 backdrop-blur-sm shadow-lg">
                                <i data-lucide="instagram" class="w-5 h-5"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Contact Form with Tech Grid Style -->
                    <!-- Replaced custom form with Fillout Form Iframe -->
                    <div class="glass-panel rounded-3xl relative tech-panel overflow-hidden h-[650px] w-full">
                        <iframe 
                            src="https://forms.fillout.com/t/3MJjjEQYdcus" 
                            width="100%" 
                            style="height: calc(100% + 60px);" 
                            frameborder="0" 
                            marginheight="0" 
                            marginwidth="0" 
                            title="Contact Me"
                            class="w-full"
                        >Loading…</iframe>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Resume Modal -->
    <div id="resume-modal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity" aria-hidden="true" onclick="document.getElementById('resume-modal').classList.add('hidden')"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="glass-panel inline-block align-bottom rounded-3xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full border border-white/10">
                <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-white/10 sm:mx-0 sm:h-10 sm:w-10 border border-white/20">
                            <i data-lucide="file-text" class="text-white w-6 h-6"></i>
                        </div>
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-bold text-white" id="modal-title">Download Resume / CV</h3>
                            <div class="mt-2">
                                <p class="text-sm text-gray-300">
                                    Choose the format you would like to download.
                                </p>
                                <div class="mt-4 space-y-3">
                                    <a href="https://drive.google.com/file/d/1uXfkZdNjgboP_TI6CVHeNDKTdRF2imZg/view?usp=sharing" class="flex items-center justify-between w-full px-4 py-3 glass-input rounded-xl hover:bg-white/10 transition-colors text-gray-200">
                                        <span>Full CV (Academic)</span>
                                        <i data-lucide="download" class="w-4 h-4 text-industrial-accent"></i>
                                    </a>
                                    <a href="https://drive.google.com/file/d/1uXfkZdNjgboP_TI6CVHeNDKTdRF2imZg/view?usp=sharing" class="flex items-center justify-between w-full px-4 py-3 glass-input rounded-xl hover:bg-white/10 transition-colors text-gray-200">
                                        <span>Resume (1 Page Summary)</span>
                                        <i data-lucide="download" class="w-4 h-4 text-industrial-accent"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-black/20 px-4 py-3 sm:px-6 flex justify-center">
                    <button type="button" class="inline-flex justify-center rounded-xl border border-white/20 shadow-sm px-6 py-2 bg-white/10 text-base font-medium text-white hover:bg-white/20 focus:outline-none sm:text-sm backdrop-blur-sm transition-all" onclick="document.getElementById('resume-modal').classList.add('hidden')">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 3D VIEWER MODAL -->
    <div id="model-modal" class="hidden fixed inset-0 z-[100] overflow-hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/80 backdrop-blur-md transition-opacity" onclick="close3DViewer()"></div>
        <div class="absolute inset-0 pointer-events-none flex items-center justify-center p-4">
            <div class="pointer-events-auto relative w-full h-full max-w-6xl max-h-[80vh] glass-panel rounded-3xl border border-white/20 shadow-2xl overflow-hidden flex flex-col">
                <div class="flex justify-between items-center p-4 border-b border-white/10 bg-white/5">
                    <h3 id="model-title" class="text-lg font-bold text-white flex items-center">
                        <i data-lucide="box" class="mr-2 text-industrial-accent"></i> 
                        <span>3D View</span>
                    </h3>
                    <button onclick="close3DViewer()" class="p-2 rounded-full hover:bg-white/10 text-gray-300 hover:text-white transition-colors">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <div class="flex-1 relative bg-gradient-to-b from-gray-900 to-black">
                    <model-viewer 
                        id="main-viewer"
                        src="" 
                        alt="A 3D model" 
                        auto-rotate 
                        camera-controls 
                        shadow-intensity="1"
                        exposure="1"
                        loading="eager"
                        poster="https://via.placeholder.com/400x300.png?text=Loading+3D+Model..."
                        class="w-full h-full">
                        <div class="absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg px-3 py-2 text-xs text-white border border-white/10 pointer-events-none">
                            Left Click to Rotate • Right Press & Hold to Drag • Scroll to Zoom
                        </div>
                    </model-viewer>
                </div>
            </div>
        </div>
    </div>

    <!-- PDF VIEWER MODAL -->
    <div id="pdf-modal" class="hidden fixed inset-0 z-[100] overflow-hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/90 backdrop-blur-md transition-opacity" onclick="closePdfViewer()"></div>
        <div class="absolute inset-0 pointer-events-none flex items-center justify-center p-4">
            <div class="pointer-events-auto relative w-full h-full max-w-5xl max-h-[85vh] glass-panel rounded-3xl border border-white/20 shadow-2xl overflow-hidden flex flex-col">
                <div class="flex justify-between items-center p-4 border-b border-white/10 bg-white/5">
                    <h3 class="text-lg font-bold text-white flex items-center">
                        <i data-lucide="file-text" class="mr-2 text-industrial-accent"></i> 
                        <span>Certificate Viewer</span>
                    </h3>
                    <button onclick="closePdfViewer()" class="p-2 rounded-full hover:bg-white/10 text-gray-300 hover:text-white transition-colors">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <div class="flex-1 bg-gray-900 relative">
                    <iframe id="pdf-frame" src="" class="w-full h-full border-0" allow="autoplay"></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();
        
        // Toast Notification Function
        function showToast(message) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            
            container.appendChild(toast);
            
            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        // Mobile Menu Toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // 3D Viewer Logic
        function open3DViewer(modelUrl, title) {
            const modal = document.getElementById('model-modal');
            const viewer = document.getElementById('main-viewer');
            const titleEl = document.querySelector('#model-title span');
            titleEl.textContent = title;
            viewer.src = modelUrl;
            modal.classList.remove('hidden');
        }

        function close3DViewer() {
            const modal = document.getElementById('model-modal');
            const viewer = document.getElementById('main-viewer');
            modal.classList.add('hidden');
            setTimeout(() => { viewer.src = ""; }, 300);
        }

        // --- PDF VIEWER LOGIC ---
        function openPdfViewer(url) {
            if (!url || url === '#' || url.includes('PASTE_YOUR')) {
                showToast("Please update the Google Drive link in the HTML code.");
                return;
            }

            let previewUrl = url;
            
            // Robust Google Drive Link Handler
            if (url.includes('drive.google.com')) {
                // Regex to find the file ID
                const idMatch = url.match(/\/d\/(.*?)\//);
                if (idMatch && idMatch[1]) {
                    previewUrl = `https://drive.google.com/file/d/${idMatch[1]}/preview`;
                } else if (url.includes('id=')) {
                     // Handle parameters style id=...
                     const idParam = url.match(/id=([^&]+)/);
                     if (idParam && idParam[1]) {
                        previewUrl = `https://drive.google.com/file/d/${idParam[1]}/preview`;
                     }
                }
            }

            const modal = document.getElementById('pdf-modal');
            const iframe = document.getElementById('pdf-frame');
            iframe.src = previewUrl;
            modal.classList.remove('hidden');
        }

        function closePdfViewer() {
            const modal = document.getElementById('pdf-modal');
            const iframe = document.getElementById('pdf-frame');
            modal.classList.add('hidden');
            setTimeout(() => { iframe.src = ""; }, 300); // Clear source to stop loading
        }

        // Projects Data
        const myProjects = [
            {
                title: "Gearbox Assembly",
                description: "Designed a multi-stage reduction gearbox. Performed motion analysis and interference detection.",
                tags: ["Assembly", "Motion Study"],
                icon: "settings",
                model: "https://modelviewer.dev/shared-assets/models/Astronaut.glb",
                borderColor: "#38bdf8", 
                gradient: "linear-gradient(145deg, #38bdf8, #000)"
            },
            {
                title: "Hydraulic Piston Arm",
                description: "Modeled a heavy-duty hydraulic arm. Conducted Finite Element Analysis (FEA) to test stress loads.",
                tags: ["FEA", "Simulation"],
                icon: "cylinder",
                model: "https://modelviewer.dev/shared-assets/models/NeilArmstrong.glb",
                borderColor: "#6366f1",
                gradient: "linear-gradient(145deg, #6366f1, #000)"
            },
            {
                title: "Ergonomic Workstation",
                description: "Designed an assembly line workstation focusing on human factors engineering and process flow.",
                tags: ["Ergonomics", "Layout"],
                icon: "wrench",
                model: "https://modelviewer.dev/shared-assets/models/RobotExpressive.glb",
                borderColor: "#10b981",
                gradient: "linear-gradient(145deg, #10b981, #000)"
            },
        ];

        function renderProjects() {
            const container = document.getElementById('projects-grid');
            if (!container) return;

            // Switch to chroma-grid class
            container.className = 'chroma-grid';

            container.innerHTML = myProjects.map(project => `
                <article 
                    class="chroma-card" 
                    style="--card-border: ${project.borderColor}; --card-gradient: ${project.gradient};"
                >
                    <div class="chroma-content">
                        <div class="chroma-icon-box">
                            <i data-lucide="${project.icon}" class="w-6 h-6 text-white"></i>
                        </div>
                        <div class="chroma-info">
                            <h3>${project.title}</h3>
                            <div class="role text-xs text-glass-textMuted mb-3 leading-relaxed line-clamp-2">${project.description}</div>
                            <div class="chroma-meta">
                                <div class="flex flex-wrap gap-1">
                                    ${project.tags.map(tag => `<span class="text-[10px] bg-white/10 px-1.5 py-0.5 rounded border border-white/5">${tag}</span>`).join('')}
                                </div>
                                <button onclick="open3DViewer('${project.model}', '${project.title}')" class="chroma-btn whitespace-nowrap ml-2">
                                    View 3D
                                </button>
                            </div>
                        </div>
                    </div>
                </article>
            `).join('') + '<div class="chroma-overlay"></div>';

            lucide.createIcons();

            // Add Event Listeners for Spotlight (Reuse logic)
            const overlay = container.querySelector('.chroma-overlay');
            const cards = container.querySelectorAll('.chroma-card');
            
            container.addEventListener('pointermove', (e) => {
                const rect = container.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                container.style.setProperty('--x', `${x}px`);
                container.style.setProperty('--y', `${y}px`);
                if(overlay) overlay.style.opacity = '1';
            });

            container.addEventListener('pointerleave', () => {
                if(overlay) overlay.style.opacity = '0';
            });

            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    card.style.setProperty('--mouse-x', `${x}px`);
                    card.style.setProperty('--mouse-y', `${y}px`);
                });
            });
        }

        // --- CHROMA GRID IMPLEMENTATION (Vanilla JS) ---
        const myCertifications = [
            {
                icon: "award",
                title: "CSWA - Certified Associate",
                subtitle: "Dassault Systèmes",
                handle: "ID: C-123456789",
                borderColor: "#38bdf8", // Cyan
                gradient: "linear-gradient(145deg, #38bdf8, #000)",
                url: "PASTE_YOUR_GOOGLE_DRIVE_LINK_HERE" // Placeholder to trigger toast
            },
            {
                icon: "shield-check",
                title: "Six Sigma Yellow Belt",
                subtitle: "Quality Control",
                handle: "Active",
                borderColor: "#6366f1", // Indigo
                gradient: "linear-gradient(180deg, #6366f1, #000)",
                url: "PASTE_YOUR_GOOGLE_DRIVE_LINK_HERE"
            },
            {
                icon: "file-badge",
                title: "AutoCAD Professional",
                subtitle: "Autodesk",
                handle: "Active",
                borderColor: "#3b82f6", // Blue
                gradient: "linear-gradient(145deg, #3b82f6, #000)",
                url: "PASTE_YOUR_GOOGLE_DRIVE_LINK_HERE"
            },
            {
                icon: "book-open",
                title: "Supply Chain Management",
                subtitle: "University Honors",
                handle: "Completed",
                borderColor: "#10b981", // Emerald
                gradient: "linear-gradient(145deg, #10b981, #000)",
                url: "PASTE_YOUR_GOOGLE_DRIVE_LINK_HERE"
            }
        ];

        function initChromaGrid() {
            const container = document.getElementById('chroma-container');
            if(!container) return;
            
            // 1. Render Cards
            container.innerHTML = myCertifications.map(c => `
                <article 
                    class="chroma-card" 
                    onclick="openPdfViewer('${c.url}')"
                    style="--card-border: ${c.borderColor}; --card-gradient: ${c.gradient};"
                >
                    <div class="chroma-content">
                        <div class="chroma-icon-box">
                            <i data-lucide="${c.icon}" class="w-6 h-6 text-white"></i>
                        </div>
                        <div class="chroma-info">
                            <h3>${c.title}</h3>
                            <div class="role">${c.subtitle}</div>
                            <div class="chroma-meta">
                                <span>${c.handle}</span>
                                <button class="chroma-btn">Show</button>
                            </div>
                        </div>
                    </div>
                </article>
            `).join('') + `
                <div class="chroma-overlay"></div>
            `;
            
            // Re-init icons for new content
            lucide.createIcons();

            // 2. Initialize GSAP Logic
            const overlay = container.querySelector('.chroma-overlay');
            const cards = container.querySelectorAll('.chroma-card');
            
            // Track container movement
            container.addEventListener('pointermove', (e) => {
                const rect = container.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Update container CSS vars for the big spotlight
                container.style.setProperty('--x', `${x}px`);
                container.style.setProperty('--y', `${y}px`);
                
                // Fade in the overlay
                if(overlay) overlay.style.opacity = '1';
            });

            container.addEventListener('pointerleave', () => {
                if(overlay) overlay.style.opacity = '0';
            });

            // Track individual card movement
            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    card.style.setProperty('--mouse-x', `${x}px`);
                    card.style.setProperty('--mouse-y', `${y}px`);
                });
            });
        }

        // --- DOCK PHYSICS LOGIC ---
        function initDock() {
            const dockItems = document.querySelectorAll('.dock-item');
            const dockPanel = document.querySelector('.dock-panel');

            if (!dockPanel) return;

            // --- SOUND ENGINE SETUP ---
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const audioCtx = new AudioContext();

            const playSound = (type) => {
                // Browser policy requires user interaction to start audio context
                if (audioCtx.state === 'suspended') {
                    audioCtx.resume();
                }

                const osc = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();

                osc.connect(gainNode);
                gainNode.connect(audioCtx.destination);

                const now = audioCtx.currentTime;

                if (type === 'hover') {
                    // Subtle "Tick" sound for hover
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(600, now);
                    osc.frequency.exponentialRampToValueAtTime(300, now + 0.03);
                    
                    gainNode.gain.setValueAtTime(0.03, now); // Very quiet
                    gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.03);
                    
                    osc.start(now);
                    osc.stop(now + 0.03);
                }
            };

            const baseSize = 50; // px
            const maxScale = 1.5; // Magnification factor
            const range = 150; // px radius for effect

            // Mouse Move (Magnification)
            dockPanel.addEventListener('mousemove', (e) => {
                const mouseX = e.clientX;
                
                dockItems.forEach(item => {
                    const rect = item.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const distance = Math.abs(mouseX - centerX);
                    
                    let scale = 1;
                    if (distance < range) {
                        // Calculate scale based on sine curve for smooth falloff
                        // Using a simplified version of the React spring logic
                        const val = 1 - distance / range;
                        scale = 1 + (maxScale - 1) * Math.sin(val * Math.PI / 2);
                    }
                    
                    item.style.width = `${baseSize * scale}px`;
                    item.style.height = `${baseSize * scale}px`;
                });
            });

            // Mouse Leave (Reset)
            dockPanel.addEventListener('mouseleave', () => {
                dockItems.forEach(item => {
                    item.style.width = `${baseSize}px`;
                    item.style.height = `${baseSize}px`;
                });
            });

            // Attach Sound Events (Hover only)
            dockItems.forEach(item => {
                item.addEventListener('mouseenter', () => playSound('hover'));
            });
        }

        // --- FLOATING LINES BACKGROUND (Vanilla Three.js) ---
        function initFloatingLines() {
            const container = document.getElementById('floating-lines-container');
            if (!container) return;

            // CONFIGURATION
            const config = {
                linesGradient: ["#38bdf8", "#6366f1", "#ffffff"], // Cyan, Indigo, White
                enabledWaves: ['top', 'middle', 'bottom'],
                lineCount: [6],
                lineDistance: [5],
                topWavePosition: { x: 10.0, y: 0.5, rotate: -0.4 },
                middleWavePosition: { x: 5.0, y: 0.0, rotate: 0.2 },
                bottomWavePosition: { x: 2.0, y: -0.7, rotate: 0.4 },
                animationSpeed: 1,
                interactive: true,
                bendRadius: 5.0,
                bendStrength: -0.5,
                mouseDamping: 0.05,
                parallax: true,
                parallaxStrength: 0.2
            };

            // SHADERS
            const vertexShader = `
                precision highp float;
                void main() {
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `;

            const fragmentShader = `
                precision highp float;

                uniform float iTime;
                uniform vec3  iResolution;
                uniform float animationSpeed;

                uniform bool enableTop;
                uniform bool enableMiddle;
                uniform bool enableBottom;

                uniform int topLineCount;
                uniform int middleLineCount;
                uniform int bottomLineCount;

                uniform float topLineDistance;
                uniform float middleLineDistance;
                uniform float bottomLineDistance;

                uniform vec3 topWavePosition;
                uniform vec3 middleWavePosition;
                uniform vec3 bottomWavePosition;

                uniform vec2 iMouse;
                uniform bool interactive;
                uniform float bendRadius;
                uniform float bendStrength;
                uniform float bendInfluence;

                uniform bool parallax;
                uniform float parallaxStrength;
                uniform vec2 parallaxOffset;

                uniform vec3 lineGradient[8];
                uniform int lineGradientCount;

                const vec3 BLACK = vec3(0.0);
                const vec3 PINK  = vec3(233.0, 71.0, 245.0) / 255.0;
                const vec3 BLUE  = vec3(47.0,  75.0, 162.0) / 255.0;

                mat2 rotate(float r) {
                    return mat2(cos(r), sin(r), -sin(r), cos(r));
                }

                vec3 background_color(vec2 uv) {
                    vec3 col = vec3(0.0);
                    float y = sin(uv.x - 0.2) * 0.3 - 0.1;
                    float m = uv.y - y;
                    col += mix(BLUE, BLACK, smoothstep(0.0, 1.0, abs(m)));
                    col += mix(PINK, BLACK, smoothstep(0.0, 1.0, abs(m - 0.8)));
                    return col * 0.5;
                }

                vec3 getLineColor(float t, vec3 baseColor) {
                    if (lineGradientCount <= 0) {
                        return baseColor;
                    }
                    vec3 gradientColor;
                    if (lineGradientCount == 1) {
                        gradientColor = lineGradient[0];
                    } else {
                        float clampedT = clamp(t, 0.0, 0.9999);
                        float scaled = clampedT * float(lineGradientCount - 1);
                        int idx = int(floor(scaled));
                        float f = fract(scaled);
                        int idx2 = min(idx + 1, lineGradientCount - 1);
                        vec3 c1 = lineGradient[idx];
                        vec3 c2 = lineGradient[idx2];
                        gradientColor = mix(c1, c2, f);
                    }
                    return gradientColor * 0.5;
                }

                float wave(vec2 uv, float offset, vec2 screenUv, vec2 mouseUv, bool shouldBend) {
                    float time = iTime * animationSpeed;
                    float x_offset    = offset;
                    float x_movement = time * 0.1;
                    float amp        = sin(offset + time * 0.2) * 0.3;
                    float y          = sin(uv.x + x_offset + x_movement) * amp;

                    if (shouldBend) {
                        vec2 d = screenUv - mouseUv;
                        float influence = exp(-dot(d, d) * bendRadius);
                        float bendOffset = (mouseUv.y - screenUv.y) * influence * bendStrength * bendInfluence;
                        y += bendOffset;
                    }

                    float m = uv.y - y;
                    return 0.0175 / max(abs(m) + 0.01, 1e-3) + 0.01;
                }

                void mainImage(out vec4 fragColor, in vec2 fragCoord) {
                    vec2 baseUv = (2.0 * fragCoord - iResolution.xy) / iResolution.y;
                    baseUv.y *= -1.0;
                    
                    if (parallax) {
                        baseUv += parallaxOffset;
                    }

                    vec3 b = lineGradientCount > 0 ? vec3(0.0) : background_color(baseUv);
                    vec3 col = b;

                    vec2 mouseUv = vec2(0.0);
                    if (interactive) {
                        mouseUv = (2.0 * iMouse - iResolution.xy) / iResolution.y;
                        mouseUv.y *= -1.0;
                    }
                    
                    if (enableBottom) {
                        for (int i = 0; i < bottomLineCount; ++i) {
                            float fi = float(i);
                            float t = fi / max(float(bottomLineCount - 1), 1.0);
                            vec3 lineCol = getLineColor(t, b);
                            float angle = bottomWavePosition.z * log(length(baseUv) + 1.0);
                            vec2 ruv = baseUv * rotate(angle);
                            col += lineCol * wave(
                                ruv + vec2(bottomLineDistance * fi + bottomWavePosition.x, bottomWavePosition.y),
                                1.5 + 0.2 * fi, baseUv, mouseUv, interactive
                            ) * 0.2;
                        }
                    }

                    if (enableMiddle) {
                        for (int i = 0; i < middleLineCount; ++i) {
                            float fi = float(i);
                            float t = fi / max(float(middleLineCount - 1), 1.0);
                            vec3 lineCol = getLineColor(t, b);
                            float angle = middleWavePosition.z * log(length(baseUv) + 1.0);
                            vec2 ruv = baseUv * rotate(angle);
                            col += lineCol * wave(
                                ruv + vec2(middleLineDistance * fi + middleWavePosition.x, middleWavePosition.y),
                                2.0 + 0.15 * fi, baseUv, mouseUv, interactive
                            ) * 0.5; // Added multiplier to reduce intensity
                        }
                    }

                    if (enableTop) {
                        for (int i = 0; i < topLineCount; ++i) {
                            float fi = float(i);
                            float t = fi / max(float(topLineCount - 1), 1.0);
                            vec3 lineCol = getLineColor(t, b);
                            float angle = topWavePosition.z * log(length(baseUv) + 1.0);
                            vec2 ruv = baseUv * rotate(angle);
                            ruv.x *= -1.0;
                            col += lineCol * wave(
                                ruv + vec2(topLineDistance * fi + topWavePosition.x, topWavePosition.y),
                                1.0 + 0.2 * fi, baseUv, mouseUv, interactive
                            ) * 0.1;
                        }
                    }

                    fragColor = vec4(col, 1.0);
                }

                void main() {
                    mainImage(gl_FragColor, gl_FragCoord.xy);
                }
            `;

            // Helper
            const hexToVec3 = (hex) => {
                let value = hex.trim().replace('#','');
                let r, g, b;
                if (value.length === 3) {
                    r = parseInt(value[0] + value[0], 16);
                    g = parseInt(value[1] + value[1], 16);
                    b = parseInt(value[2] + value[2], 16);
                } else {
                    r = parseInt(value.slice(0, 2), 16);
                    g = parseInt(value.slice(2, 4), 16);
                    b = parseInt(value.slice(4, 6), 16);
                }
                return new THREE.Vector3(r / 255, g / 255, b / 255);
            };

            const scene = new THREE.Scene();
            const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
            camera.position.z = 1;

            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            const uniforms = {
                iTime: { value: 0 },
                iResolution: { value: new THREE.Vector3(renderer.domElement.width, renderer.domElement.height, 1) },
                animationSpeed: { value: config.animationSpeed },
                enableTop: { value: config.enabledWaves.includes('top') },
                enableMiddle: { value: config.enabledWaves.includes('middle') },
                enableBottom: { value: config.enabledWaves.includes('bottom') },
                topLineCount: { value: config.lineCount[0] },
                middleLineCount: { value: config.lineCount[0] },
                bottomLineCount: { value: config.lineCount[0] },
                topLineDistance: { value: config.lineDistance[0] * 0.01 },
                middleLineDistance: { value: config.lineDistance[0] * 0.01 },
                bottomLineDistance: { value: config.lineDistance[0] * 0.01 },
                topWavePosition: { value: new THREE.Vector3(config.topWavePosition.x, config.topWavePosition.y, config.topWavePosition.rotate) },
                middleWavePosition: { value: new THREE.Vector3(config.middleWavePosition.x, config.middleWavePosition.y, config.middleWavePosition.rotate) },
                bottomWavePosition: { value: new THREE.Vector3(config.bottomWavePosition.x, config.bottomWavePosition.y, config.bottomWavePosition.rotate) },
                iMouse: { value: new THREE.Vector2(-1000, -1000) },
                interactive: { value: config.interactive },
                bendRadius: { value: config.bendRadius },
                bendStrength: { value: config.bendStrength },
                bendInfluence: { value: 0 },
                parallax: { value: config.parallax },
                parallaxStrength: { value: config.parallaxStrength },
                parallaxOffset: { value: new THREE.Vector2(0, 0) },
                lineGradient: { value: Array(8).fill(new THREE.Vector3(1, 1, 1)) },
                lineGradientCount: { value: 0 }
            };

            if (config.linesGradient.length > 0) {
                const stops = config.linesGradient.slice(0, 8);
                uniforms.lineGradientCount.value = stops.length;
                stops.forEach((hex, i) => {
                    uniforms.lineGradient.value[i] = hexToVec3(hex);
                });
            }

            const geometry = new THREE.PlaneGeometry(2, 2);
            const material = new THREE.ShaderMaterial({
                uniforms: uniforms,
                vertexShader: vertexShader,
                fragmentShader: fragmentShader
            });
            scene.add(new THREE.Mesh(geometry, material));

            const clock = new THREE.Clock();
            const targetMouse = new THREE.Vector2(-1000, -1000);
            const currentMouse = new THREE.Vector2(-1000, -1000);
            let targetInfluence = 0;
            let currentInfluence = 0;
            const targetParallax = new THREE.Vector2(0, 0);
            const currentParallax = new THREE.Vector2(0, 0);

            function animate() {
                uniforms.iTime.value = clock.getElapsedTime();

                if (config.interactive) {
                    currentMouse.lerp(targetMouse, config.mouseDamping);
                    uniforms.iMouse.value.copy(currentMouse);
                    
                    currentInfluence += (targetInfluence - currentInfluence) * config.mouseDamping;
                    uniforms.bendInfluence.value = currentInfluence;
                }

                if (config.parallax) {
                    currentParallax.lerp(targetParallax, config.mouseDamping);
                    uniforms.parallaxOffset.value.copy(currentParallax);
                }

                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            }

            const handleMove = (e) => {
                const rect = renderer.domElement.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const dpr = renderer.getPixelRatio();

                targetMouse.set(x * dpr, (rect.height - y) * dpr);
                targetInfluence = 1.0;

                if (config.parallax) {
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const offsetX = (x - centerX) / rect.width;
                    const offsetY = -(y - centerY) / rect.height;
                    targetParallax.set(offsetX * config.parallaxStrength, offsetY * config.parallaxStrength);
                }
            };

            const handleLeave = () => {
                targetInfluence = 0.0;
            };

            const handleResize = () => {
                const w = container.clientWidth;
                const h = container.clientHeight;
                renderer.setSize(w, h);
                uniforms.iResolution.value.set(w * renderer.getPixelRatio(), h * renderer.getPixelRatio(), 1);
            };

            window.addEventListener('resize', handleResize);
            document.addEventListener('mousemove', handleMove);
            document.addEventListener('mouseleave', handleLeave);

            animate();
        }

        // --- LOADING SCREEN LOGIC ---
        const initLoadingScreen = () => {
            const bar = document.getElementById('loader-bar');
            const barContainer = document.querySelector('.loader-bar-container');
            const nameReveal = document.getElementById('loader-name');
            const screen = document.getElementById('loading-screen');
            
            // Define Hoosh Sound Generator
            const playHooshSound = () => {
                try {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    const ctx = new AudioContext();
                    
                    // Resume context if suspended (browser policy)
                    if (ctx.state === 'suspended') {
                        ctx.resume();
                    }

                    // Create white noise buffer
                    const bufferSize = ctx.sampleRate * 2; // 2 seconds buffer
                    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
                    const data = buffer.getChannelData(0);
                    for (let i = 0; i < bufferSize; i++) {
                        data[i] = Math.random() * 2 - 1;
                    }

                    const noise = ctx.createBufferSource();
                    noise.buffer = buffer;

                    // Create Filter for the "Whoosh" sweep
                    const filter = ctx.createBiquadFilter();
                    filter.type = 'lowpass';
                    filter.Q.value = 1;

                    const gain = ctx.createGain();
                    
                    // Connect nodes
                    noise.connect(filter);
                    filter.connect(gain);
                    gain.connect(ctx.destination);

                    const now = ctx.currentTime;

                    // --- SOUND ENVELOPE ---
                    // 1. Filter Sweep (Low to High freq makes the "Whoosh")
                    filter.frequency.setValueAtTime(100, now); 
                    filter.frequency.exponentialRampToValueAtTime(3000, now + 0.8); // Sweep up to 3kHz

                    // 2. Volume Envelope (Fade in -> Fade out)
                    gain.gain.setValueAtTime(0, now);
                    gain.gain.linearRampToValueAtTime(0.15, now + 0.2); // Attack
                    gain.gain.exponentialRampToValueAtTime(0.001, now + 1.2); // Long Decay

                    noise.start(now);
                    noise.stop(now + 1.5);
                } catch (e) {
                    // console.warn("Audio autoplay blocked by browser policy", e);
                }
            };

            let progress = 0;
            const duration = 1500; 
            const intervalTime = duration / 100;
            
            const interval = setInterval(() => {
                progress++;
                bar.style.width = progress + "%";
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // 1. Fade out the bar
                    barContainer.style.opacity = '0';
                    
                    setTimeout(() => {
                        barContainer.style.display = 'none';
                        
                        // PLAY SOUND HERE
                        playHooshSound();

                        // 2. Trigger BlurText Animation
                        nameReveal.style.display = 'block';
                        animateBlurText(nameReveal);

                        // 3. Slide Curtain Up after reading the name
                        setTimeout(() => {
                            screen.classList.add('slide-up-exit');
                            document.body.style.overflow = 'auto'; // Enable scrolling
                            
                            // Reveal the Dock
                            const dock = document.querySelector('.dock-container');
                            if (dock) {
                                dock.style.opacity = '1';
                                dock.style.pointerEvents = 'auto';
                            }

                            // Cleanup DOM after animation finishes
                            setTimeout(() => {
                                screen.style.display = 'none';
                            }, 1000); 
                            
                        }, 2200); // Wait for text animation + reading time
                        
                    }, 300);
                }
            }, intervalTime);
        };

        // --- Vanilla JS Adaptation of BlurText ---
        function animateBlurText(element) {
            const text = element.innerText;
            element.innerHTML = ''; // Clear plain text
            
            // Split into characters (looks more premium than words for a short name)
            const chars = text.split('');
            
            chars.forEach((char, index) => {
                const span = document.createElement('span');
                // Handle spaces
                if (char === ' ') {
                    span.innerHTML = '&nbsp;';
                    span.style.display = 'inline-block';
                } else {
                    span.innerText = char;
                    span.classList.add('blur-char');
                    
                    // Add transition delay for staggered effect
                    span.style.transitionDelay = `${index * 0.1}s`;
                }
                element.appendChild(span);
            });

            // Trigger the animation in the next frame to ensure styles are applied first
            requestAnimationFrame(() => {
                const spans = element.querySelectorAll('.blur-char');
                spans.forEach(span => {
                    span.classList.add('is-visible');
                });
            });
        }

        // --- SMOOTH SCROLLBAR INITIALIZATION ---
        function initSmoothScroll() {
            const container = document.querySelector('#main-scroll-container');
            if (!container) return;

            const scrollbar = Scrollbar.init(container, {
                damping: 0.05,
                renderByPixels: true,
                alwaysShowTracks: false
            });

            // Connect Dock Links to Smooth Scrollbar
            document.querySelectorAll('.dock-item, a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href') || this.querySelector('a')?.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        e.preventDefault();
                        const targetId = href.substring(1);
                        const target = document.getElementById(targetId);
                        if (target) {
                            scrollbar.scrollIntoView(target, {
                                damping: 0.05,
                                offsetTop: 50,
                            });
                        }
                    }
                });
            });
        }

        // --- TARGET CURSOR LOGIC REMOVED ---
        // initTargetCursor function deleted

        document.addEventListener('DOMContentLoaded', () => {
            initLoadingScreen(); // Start Loading Sequence
            // initCubeInteraction removed
            renderProjects();
            initChromaGrid(); // New Chroma Grid for Certs
            initFloatingLines(); // Previous Background
            initDock(); 
            initSmoothScroll(); // Smooth Scrollbar
            // initTargetCursor removed
        });

    </script>
</body>
</html>
