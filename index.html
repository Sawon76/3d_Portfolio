Separate code into HTML, CSS, JS:

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sawon M. Portfolio</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Three.js (Required for Silk Background) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- GSAP (Required for Chroma Grid) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- Smooth Scrollbar -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/smooth-scrollbar/8.8.4/smooth-scrollbar.js"></script>

    <!-- Model Viewer (For 3D GLB files) -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <!-- PDF.js (For Custom PDF Viewer) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        // Set worker source for PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;700&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        glass: {
                            100: 'rgba(255, 255, 255, 0.1)',
                            200: 'rgba(255, 255, 255, 0.2)',
                            border: 'rgba(255, 255, 255, 0.15)',
                            text: 'rgba(255, 255, 255, 0.9)',
                            textMuted: 'rgba(255, 255, 255, 0.6)',
                        },
                        industrial: {
                            accent: '#38bdf8', // Cyan
                            highlight: '#6366f1', // Indigo
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        serif: ['Cinzel', 'serif'],
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                        'flow': 'flow 15s ease infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        flow: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Liquid Background - Darker/Rich Blue for that premium feel */
        body {
            background: #000000; /* Pure Black */
            color: rgba(255, 255, 255, 0.9);
            min-height: 100vh;
            /* Crucial for smooth scrollbar */
            height: 100vh;
            overflow: hidden; 
            
            /* --- SECURITY: DISABLE TEXT SELECTION --- */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE10+/Edge */
            user-select: none; /* Standard */
        }

        /* Smooth Scrollbar Customization */
        .scrollbar-track {
            background: transparent !important;
            z-index: 9999 !important;
        }
        .scrollbar-thumb {
            background: rgba(56, 189, 248, 0.3) !important; /* Industrial Cyan */
            border-radius: 10px !important;
        }
        .scrollbar-thumb:hover {
            background: rgba(56, 189, 248, 0.6) !important;
        }

        /* --- SHADER BACKGROUND (Layer 1) --- */
        #shader-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; 
            overflow: hidden;
            pointer-events: auto; 
            opacity: 0.6; /* Subtle texture on black */
            mix-blend-mode: screen; /* Ensures it lights up the dark background lightly */
        }

        /* --- 3D CARD STYLES --- */
        .card-container-3d {
            perspective: 1000px;
        }
        
        .card-body-3d {
            transform-style: preserve-3d;
            transition: transform 0.1s linear; /* Fast follow */
        }

        /* When mouse leaves, smooth return */
        .card-container-3d:not(:hover) .card-body-3d {
            transition: transform 0.5s ease;
        }

        .card-item-3d {
            transition: transform 0.2s linear;
        }

        /* --- DOCK STYLES (UPDATED FOR LIQUID GLASS) --- */
        .dock-container {
            position: fixed;
            /* Vertical Left Center placement for Desktop */
            top: 50%;
            left: 2rem;
            bottom: auto;
            transform: translateY(-50%);
            z-index: 9999;
            display: flex;
            justify-content: center;
            /* Start hidden for loading screen */
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .dock-panel {
            position: relative; 
            display: flex;
            /* Vertical stack */
            flex-direction: column;
            align-items: center; 
            gap: 0.75rem;
            padding: 0.5rem;
            
            /* --- LIQUID GLASS STYLES --- */
            border-radius: 24px; /* Must match radius in JS */
            
            /* Remove standard blur/bg in favor of the SVG filter */
            background: rgba(255, 255, 255, 0.01);
            backdrop-filter: url(#liquidGlass);
            -webkit-backdrop-filter: url(#liquidGlass); /* For Safari support check */
            
            /* Complex shadow for glass depth */
            box-shadow:
                0 0 2px 1px rgba(255, 255, 255, 0.05) inset,
                0 0 10px 4px rgba(255, 255, 255, 0.02) inset,
                0px 4px 16px rgba(17, 17, 26, 0.1),
                0px 8px 24px rgba(17, 17, 26, 0.1),
                0px 16px 56px rgba(17, 17, 26, 0.1);
                
            border: 1px solid rgba(255,255,255,0.05);
            transition: width 0.1s, height 0.1s; /* Smooth sizing if container changes */
        }

        .dock-item {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px; /* Base size */
            height: 40px; /* Base size */
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            /* Physics bounce transition */
            transition: width 0.2s cubic-bezier(0.25, 1.4, 0.5, 1), 
                        height 0.2s cubic-bezier(0.25, 1.4, 0.5, 1), 
                        background-color 0.2s,
                        transform 0.2s;
            color: #ccc;
        }
        
        .dock-item:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: #fff;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(56, 189, 248, 0.3);
            border-color: rgba(56, 189, 248, 0.5);
        }

        .dock-icon {
            width: 50%;
            height: 50%;
            pointer-events: none;
        }

        .dock-label {
            position: absolute;
            /* Position to the RIGHT of the icon for vertical dock */
            left: 100%;
            top: 50%;
            transform: translateY(-50%) translateX(10px); /* Start offset */
            margin-left: 12px;
            
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s, transform 0.2s;
            white-space: nowrap;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .dock-item:hover .dock-label {
            opacity: 1;
            transform: translateY(-50%) translateX(0); /* Slide in */
        }

        /* --- MOBILE RESPONSIVENESS FOR DOCK (Revert to Horizontal) --- */
        @media (max-width: 640px) {
            .dock-container {
                top: auto;
                bottom: 1rem;
                left: 50%;
                transform: translateX(-50%);
                width: 95%;
                max-width: 100%;
            }
            .dock-panel {
                flex-direction: row;
                align-items: flex-end;
                gap: 0.5rem;
                padding: 0.5rem;
                width: 100%;
                justify-content: space-around;
            }
            .dock-item {
                width: 40px;
                height: 40px;
                border-radius: 10px;
            }
            .dock-label {
                display: none; /* Hide labels on mobile to prevent clutter */
            }
        }

        /* --- LOADING SCREEN STYLES --- */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000; /* Match body bg */
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 1s cubic-bezier(0.76, 0, 0.24, 1);
            overflow: hidden; /* Needed for canvas */
        }

        /* Vortex Canvas in Loader */
        #vortex-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind loader content */
        }

        /* Class to slide the curtain up */
        .slide-up-exit {
            transform: translateY(-100%);
        }

        .loader-content {
            text-align: center;
            color: #ffffff;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
        }

        /* Loading Bar Styles */
        .loader-bar-container {
            width: 200px;
            height: 2px;
            background-color: #1e293b; 
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 2rem; /* Increased spacing */
            transition: opacity 0.3s ease;
        }

        #loader-bar {
            width: 0%;
            height: 100%;
            background-color: #38bdf8; 
            box-shadow: 0 0 10px #38bdf8;
            transition: width 0.05s linear;
        }

        /* --- BLUR TEXT STYLES --- */
        #loader-name {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            font-weight: 700;
            letter-spacing: 0.2em;
            display: none; /* Hidden initially */
            perspective: 1000px; /* Adds depth */
        }

        @media (max-width: 768px) {
            #loader-name {
                font-size: 2rem;
            }
        }

        /* Each character's style */
        .blur-char {
            display: inline-block;
            opacity: 0;
            filter: blur(10px);
            transform: translate3d(0, -50px, 0); /* Start from Top (-50px) */
            transition: opacity 0.8s ease, filter 0.8s ease, transform 0.8s cubic-bezier(0.2, 0.65, 0.3, 0.9);
            will-change: transform, filter, opacity;
        }

        /* The "In View" / Animated State */
        .blur-char.is-visible {
            opacity: 1;
            filter: blur(0px);
            transform: translate3d(0, 0, 0);
        }

        /* Glass Panel Utility */
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .glass-panel-hover:hover {
            background: rgba(255, 255, 255, 0.07);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.15);
        }

        /* Input fields glass style */
        .glass-input {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(4px);
            color: white;
        }
        .glass-input:focus {
            background: rgba(0, 0, 0, 0.4);
            border-color: #38bdf8;
            outline: none;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.2);
        }

        /* Floating glow orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            z-index: -2; 
            opacity: 0.1; /* Reduced from 0.3 */
        }

        /* Model Viewer Styles */
        model-viewer {
            width: 100%;
            height: 100%;
            background-color: transparent;
            --poster-color: transparent;
        }

        /* --- NEW: TECH PANEL STYLE (Contact Form) --- */
        .tech-panel {
            border: 1px solid rgba(56, 189, 248, 0.4) !important; /* Cyan Grid Line */
            background-image: 
                linear-gradient(rgba(56, 189, 248, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(56, 189, 248, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.1);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }
        
        .toast {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border-left: 4px solid #38bdf8;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
            pointer-events: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            max-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }

        /* --- LIQUID GLASS FILTER (Hidden) --- */
        .svg-filter {
            position: absolute;
            width: 0;
            height: 0;
            pointer-events: none;
            opacity: 0;
        }

        /* Removed Target Cursor Styles */
    </style>
</head>
<body class="font-sans relative min-h-screen">

    <!-- LIQUID GLASS SVG DEFINITION -->
    <svg class="svg-filter">
      <defs>
        <filter
          id="liquidGlass"
          color-interpolation-filters="sRGB"
        >
          <feImage
            id="liquid-displacement-image"
            x="0"
            y="0"
            width="100%"
            height="100%"
            result="map"
          />
          <feDisplacementMap
            id="redchannel"
            in="SourceGraphic"
            in2="map"
            xChannelSelector="R"
            yChannelSelector="B"
            scale="0" 
            result="dispRed"
          />
          <feColorMatrix
            in="dispRed"
            type="matrix"
            values="1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"
            result="red"
          />
          <feDisplacementMap
            id="greenchannel"
            in="SourceGraphic"
            in2="map"
            xChannelSelector="R"
            yChannelSelector="B"
            scale="10" 
            result="dispGreen"
          />
          <feColorMatrix
            in="dispGreen"
            type="matrix"
            values="0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0"
            result="green"
          />
          <feDisplacementMap
            id="bluechannel"
            in="SourceGraphic"
            in2="map"
            xChannelSelector="R"
            yChannelSelector="B"
            scale="20" 
            result="dispBlue"
          />
          <feColorMatrix
            in="dispBlue"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0"
            result="blue"
          />
          <feBlend
            in="red"
            in2="green"
            mode="screen"
            result="rg"
          />
          <feBlend
            in="rg"
            in2="blue"
            mode="screen"
            result="output"
          />
          <feGaussianBlur stdDeviation="11" />
        </filter>
      </defs>
    </svg>

    <!-- LOADING SCREEN -->
    <div id="loading-screen">
        <!-- Vortex Canvas Background -->
        <canvas id="vortex-canvas"></canvas>
        
        <div class="loader-content">
            <!-- Progress Bar Container -->
            <div class="loader-bar-container">
                <div id="loader-bar"></div>
            </div>
            
            <!-- Name Reveal -->
            <div id="loader-name">SAWON M.</div>
        </div>
    </div>

    <!-- NEW: SHADER BACKGROUND (Layer 1) -->
    <div id="shader-background"></div>

    <!-- DOCK NAVIGATION -->
    <div class="dock-container">
        <div class="dock-panel">
            <a href="#home" class="dock-item">
                <i data-lucide="home" class="dock-icon"></i>
                <span class="dock-label">Home</span>
            </a>
            
            <button onclick="openResumeModal()" class="dock-item">
                <i data-lucide="file-text" class="dock-icon"></i>
                <span class="dock-label">CV / Resume</span>
            </button>

            <a href="#projects" class="dock-item">
                <i data-lucide="briefcase" class="dock-icon"></i>
                <span class="dock-label">Projects</span>
            </a>

            <a href="#certificates" class="dock-item">
                <i data-lucide="award" class="dock-icon"></i>
                <span class="dock-label">Certificates</span>
            </a>

            <!-- NEW DOCK ITEMS -->
            <a href="#achievements" class="dock-item">
                <i data-lucide="trophy" class="dock-icon"></i>
                <span class="dock-label">Achievements</span>
            </a>

            <a href="#research" class="dock-item">
                <i data-lucide="microscope" class="dock-icon"></i>
                <span class="dock-label">Research</span>
            </a>

            <a href="#contact" class="dock-item">
                <i data-lucide="mail" class="dock-icon"></i>
                <span class="dock-label">Contact</span>
            </a>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- MAIN SCROLL CONTAINER (FOR SMOOTH SCROLLBAR) -->
    <main id="main-scroll-container" style="width: 100%; height: 100vh;">
        <!-- Hero Section -->
        <section id="home" class="relative min-h-screen flex flex-col items-center justify-center overflow-hidden pt-24 md:pt-20">
            
            <!-- Layer 2: Interactive Grid Pattern -->
            <div id="grid-pattern-wrap" class="absolute inset-0 overflow-hidden z-[-2] pointer-events-none">
                <canvas id="interactive-grid-canvas" class="w-full h-[200%] -translate-y-[25%] skew-y-12 opacity-30" style="mask-image: radial-gradient(350px circle at center, white, transparent); -webkit-mask-image: radial-gradient(350px circle at center, white, transparent);"></canvas>
            </div>

            <!-- 1. Hero Image (Placeholder for now) -->
            <div class="relative z-20 mb-8 animate-float">
                <div class="relative w-40 h-40 md:w-48 md:h-48 rounded-full overflow-hidden border-2 border-industrial-accent/50 shadow-[0_0_30px_rgba(56,189,248,0.6)] group bg-black">
                    <!-- CHANGED: Use placeholder for preview -->
                    <img src="https://ui-avatars.com/api/?name=Sawon+Mukherjee&background=1e293b&color=fff&size=200" 
                         alt="Profile Photo" 
                         class="w-full h-full object-cover hover:scale-110 transition-transform duration-700 ease-in-out">
                </div>
            </div>

            <!-- 2. Top Label -->
            <div class="text-center z-20 mt-6 md:mt-8 space-y-2 px-4 relative w-full flex flex-col items-center">
                <p class="text-industrial-accent text-[10px] md:text-xs lg:text-sm font-mono uppercase tracking-[0.2em] md:tracking-[0.3em] animate-pulse mb-2 md:mb-4 text-center">
                    Studying Industrial Engineering and Management
                </p>
                
                <!-- 3. Name (Main Title) - REPLACED WITH PARTICLE CANVAS -->
                <!-- Increased height to accommodate stacked text on mobile -->
                <div id="particle-text-container" class="relative w-full h-[150px] md:h-[180px] lg:h-[200px] flex items-center justify-center overflow-visible z-20">
                    <canvas id="text-particle-canvas"></canvas>
                </div>
                
                <!-- Hidden h1 for SEO/Accessibility -->
                <h1 class="sr-only">SAWON MUKHERJEE</h1>

                <!-- 4. Short Description -->
                <p class="text-glass-textMuted text-[10px] md:text-xs lg:text-sm font-mono uppercase tracking-[0.15em] md:tracking-[0.2em] mt-2 md:mt-4 max-w-[90%] md:max-w-2xl mx-auto text-center">
                    3D CAD Modeling • Simulation • Optimization
                </p>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center justify-center w-full mt-8 md:mt-12 z-20">
                <button onclick="openResumeModal()" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                    <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                    <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                        CV / Resume <i data-lucide="file-text" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                    </span>
                </button>
            </div>

            <!-- Scroll Indicator -->
            <div class="absolute bottom-24 md:bottom-32 left-1/2 transform -translate-x-1/2 animate-bounce opacity-50 z-10">
                <span class="block w-[1px] h-8 md:h-12 bg-gradient-to-b from-transparent via-white to-transparent"></span>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-12 md:py-24 relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-end mb-8 md:mb-12">
                    <div class="w-full md:w-auto text-center md:text-left">
                        <p class="mt-2 text-2xl md:text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl drop-shadow-lg">
                            SolidWorks Projects
                        </p>
                    </div>
                    <div class="mt-4 md:mt-0 w-full md:w-auto text-center md:text-right">
                        <span class="text-glass-textMuted text-xs md:text-sm font-mono bg-white/5 px-3 py-1 rounded-full border border-white/10 backdrop-blur-sm inline-block">Recent works from university & personal labs</span>
                    </div>
                </div>

                <!-- DYNAMIC PROJECTS CONTAINER -->
            <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                <!-- JS will render cards here -->
            </div>
            
            <div class="mt-8 md:mt-12 text-center">
                <a href="https://grabcad.com/sawon.mukherjee-1" class="inline-flex items-center px-6 py-2 md:px-8 md:py-3 border border-white/20 shadow-lg text-sm md:text-base font-medium rounded-2xl text-gray-200 glass-panel hover:bg-white/10 hover:text-white hover:scale-105 transition-all" style="backdrop-filter: blur(32px); -webkit-backdrop-filter: blur(32px);">
                    <i data-lucide="github" class="mr-2 w-4 h-4 md:w-5 md:h-5"></i>
                    See more on GrabCAD
                </a>
            </div>
        </div>
    </section>

    <!-- Certificates Section -->
        <section id="certificates" class="py-12 md:py-24 relative overflow-hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="text-center mb-10 md:mb-16">
                    <p class="mt-2 text-2xl md:text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl drop-shadow-lg">
                        Certifications & Achievements
                    </p>
                </div>

                <!-- CHROMA GRID for Certificates -->
                <div id="chroma-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <!-- Cards are rendered via JS in initChromaGrid() -->
                </div>
            </div>
        </section>

        <!-- NEW: Achievements Section -->
        <section id="achievements" class="py-12 md:py-24 relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="text-center mb-10 md:mb-16">
                    <p class="mt-2 text-2xl md:text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl drop-shadow-lg">
                        Awards & Recognition
                    </p>
                </div>
                
                <div id="achievements-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <!-- Rendered by JS -->
                </div>
            </div>
        </section>

        <!-- NEW: Research Section -->
        <section id="research" class="py-12 md:py-24 relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="text-center mb-10 md:mb-16">
                    <p class="mt-2 text-2xl md:text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl drop-shadow-lg">
                        Research & Publications
                    </p>
                </div>
                
                <div id="research-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <!-- Rendered by JS -->
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-12 md:py-24 relative border-t border-white/5" style="padding-bottom: 150px;">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-16">
                    <div>
                        <h2 class="text-base text-industrial-accent font-semibold tracking-wide uppercase font-mono drop-shadow-md">Contact</h2>
                        <p class="mt-2 text-2xl md:text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl mb-4 md:mb-6 drop-shadow-lg">
                            Let's Build Something
                        </p>
                        <p class="text-base md:text-lg text-glass-textMuted mb-6 md:mb-8">
                            Looking for an internship, project collaboration, or full-time opportunity? I'm always open to discussing new industrial engineering challenges.
                        </p>
                        
                        <div class="space-y-4 md:space-y-6">
                            <div class="flex items-center group">
                                <div class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/5 flex items-center justify-center mr-4 group-hover:bg-industrial-accent/20 transition-colors border border-white/10 shrink-0">
                                    <i data-lucide="mail" class="w-4 h-4 md:w-5 md:h-5 text-industrial-accent"></i>
                                </div>
                                <span class="text-sm md:text-base text-gray-300 group-hover:text-white transition-colors break-all">sawonmukherjee1@gmail.com</span>
                            </div>
                            <div class="flex items-center group">
                                <div class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/5 flex items-center justify-center mr-4 group-hover:bg-industrial-accent/20 transition-colors border border-white/10 shrink-0">
                                    <i data-lucide="map-pin" class="w-4 h-4 md:w-5 md:h-5 text-industrial-accent"></i>
                                </div>
                                <span class="text-sm md:text-base text-gray-300 group-hover:text-white transition-colors">Rangpur, Bangladesh</span>
                            </div>
                            
                        </div>

                        <div class="mt-8 flex space-x-4">
                            <a href="https://www.linkedin.com/in/sawonmukherjee/" class="w-10 h-10 md:w-12 md:h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-industrial-accent hover:text-white hover:-translate-y-1 transition-all text-gray-400 backdrop-blur-sm shadow-lg">
                                <i data-lucide="linkedin" class="w-4 h-4 md:w-5 md:h-5"></i>
                            </a>
                            <a href="https://github.com/Sawon76" class="w-10 h-10 md:w-12 md:h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-industrial-accent hover:text-white hover:-translate-y-1 transition-all text-gray-400 backdrop-blur-sm shadow-lg">
                                <i data-lucide="github" class="w-4 h-4 md:w-5 md:h-5"></i>
                            </a>
                            <a href="https://www.instagram.com/sawon.mukherjee.76/" class="w-10 h-10 md:w-12 md:h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-industrial-accent hover:text-white hover:-translate-y-1 transition-all text-gray-400 backdrop-blur-sm shadow-lg">
                                <i data-lucide="instagram" class="w-4 h-4 md:w-5 md:h-5"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Contact Form with Tech Grid Style -->
                    <div class="glass-panel rounded-3xl relative tech-panel overflow-hidden h-[500px] md:h-[650px] w-full">
                        <iframe 
                            src="https://forms.fillout.com/t/3MJjjEQYdcus" 
                            width="100%" 
                            style="height: calc(100% + 60px);" 
                            frameborder="0" 
                            marginheight="0" 
                            marginwidth="0" 
                            title="Contact Me"
                            class="w-full"
                        >Loading…</iframe>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Resume Modal -->
    <div id="resume-modal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity" aria-hidden="true" onclick="closeResumeModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="glass-panel inline-block align-bottom rounded-3xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-[95%] sm:max-w-lg border border-white/10 mb-4 sm:mb-0">
                <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-white/10 sm:mx-0 sm:h-10 sm:w-10 border border-white/20">
                            <i data-lucide="file-text" class="text-white w-6 h-6"></i>
                        </div>
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-bold text-white" id="modal-title">Download Resume / CV</h3>
                            <div class="mt-2">
                                <p class="text-sm text-gray-300">
                                    Choose the format you would like to download.
                                </p>
                                <div class="mt-4 space-y-3">
                                    <a href="https://drive.google.com/file/d/1uXfkZdNjgboP_TI6CVHeNDKTdRF2imZg/view?usp=sharing" target="_blank" class="flex items-center justify-between w-full px-4 py-3 glass-input rounded-xl hover:bg-white/10 transition-colors text-gray-200">
                                        <span>Full CV (Academic)</span>
                                        <i data-lucide="download" class="w-4 h-4 text-industrial-accent"></i>
                                    </a>
                                    <a href="https://drive.google.com/file/d/1uXfkZdNjgboP_TI6CVHeNDKTdRF2imZg/view?usp=sharing" target="_blank" class="flex items-center justify-between w-full px-4 py-3 glass-input rounded-xl hover:bg-white/10 transition-colors text-gray-200">
                                        <span>Resume (1 Page Summary)</span>
                                        <i data-lucide="download" class="w-4 h-4 text-industrial-accent"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-black/20 px-4 py-3 sm:px-6 flex justify-center">
                    <button type="button" class="inline-flex justify-center rounded-xl border border-white/20 shadow-sm px-6 py-2 bg-white/10 text-base font-medium text-white hover:bg-white/20 focus:outline-none sm:text-sm backdrop-blur-sm transition-all" onclick="closeResumeModal()">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 3D VIEWER MODAL -->
    <div id="model-modal" class="hidden fixed inset-0 z-[100] overflow-hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/80 backdrop-blur-md transition-opacity" onclick="close3DViewer()"></div>
        <div class="absolute inset-0 pointer-events-none flex items-center justify-center p-4">
            <div class="pointer-events-auto relative w-full h-full max-w-[95%] sm:max-w-6xl max-h-[80vh] glass-panel rounded-3xl border border-white/20 shadow-2xl overflow-hidden flex flex-col">
                <div class="flex justify-between items-center p-4 border-b border-white/10 bg-white/5">
                    <h3 id="model-title" class="text-lg font-bold text-white flex items-center">
                        <i data-lucide="box" class="mr-2 text-industrial-accent"></i> 
                        <span>3D View</span>
                    </h3>
                    <button onclick="close3DViewer()" class="p-2 rounded-full hover:bg-white/10 text-gray-300 hover:text-white transition-colors">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <div class="flex-1 relative bg-gradient-to-b from-gray-900 to-black">
                    <model-viewer 
                        id="main-viewer"
                        src="" 
                        alt="A 3D model" 
                        auto-rotate 
                        camera-controls 
                        shadow-intensity="1"
                        exposure="1"
                        loading="eager"
                        poster="https://via.placeholder.com/400x300.png?text=Loading+3D+Model..."
                        class="w-full h-full">
                        <div class="absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg px-3 py-2 text-xs text-white border border-white/10 pointer-events-none hidden md:block">
                            Left Click to Rotate • Right Press & Hold to Drag • Scroll to Zoom
                        </div>
                    </model-viewer>
                </div>
            </div>
        </div>
    </div>

    <!-- PDF VIEWER MODAL (Custom with PDF.js) -->
    <div id="pdf-modal" class="hidden fixed inset-0 z-[100] overflow-hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/90 backdrop-blur-md transition-opacity" onclick="closePdfViewer()"></div>
        <div class="absolute inset-0 pointer-events-none flex items-center justify-center p-4">
            <div class="pointer-events-auto relative w-full h-full max-w-[95%] sm:max-w-5xl max-h-[85vh] glass-panel rounded-3xl border border-white/20 shadow-2xl overflow-hidden flex flex-col">
                
                <div class="flex justify-between items-center p-4 border-b border-white/10 bg-white/5">
                    <h3 class="text-lg font-bold text-white flex items-center">
                        <i data-lucide="file-text" class="mr-2 text-industrial-accent"></i> 
                        <span>Certificate Viewer</span>
                    </h3>
                    <button onclick="closePdfViewer()" class="p-2 rounded-full hover:bg-white/10 text-gray-300 hover:text-white transition-colors">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <!-- Custom PDF Controls -->
                <div id="pdf-controls" class="flex items-center justify-center gap-4 p-2 bg-black/40 border-b border-white/10 text-white text-sm">
                    <button id="pdf-prev" class="px-3 py-1 rounded hover:bg-white/10 disabled:opacity-50">Previous</button>
                    <span>Page <span id="pdf-page-num">1</span> / <span id="pdf-page-count">--</span></span>
                    <button id="pdf-next" class="px-3 py-1 rounded hover:bg-white/10 disabled:opacity-50">Next</button>
                </div>

                <div class="flex-1 bg-gray-900 relative overflow-auto flex justify-center p-4" id="pdf-render-container">
                    <!-- Canvas for rendering PDF (No download button here!) -->
                    <canvas id="pdf-canvas" class="shadow-2xl" oncontextmenu="return false;"></canvas>
                    
                    <!-- Fallback iframe for Google Drive links (if used) -->
                    <iframe id="pdf-frame" src="" class="hidden w-full h-full border-0" allow="autoplay"></iframe>
                    
                    <!-- Loader -->
                    <div id="pdf-loader" class="absolute inset-0 flex items-center justify-center bg-black/50 z-10 hidden">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Initialize Lucide Icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        // ============================================
        // --- CONFIGURATION & DATA SECTION ---
        // (Update this section to change content)
        // ============================================

        // --- PROJECTS DATA ---
        const myProjects = [
            {
                title: "Iphone 14 Pro Max Model",
                description: "Designed an Iphone 14 pro max model.",
                tags: ["3D Modeling"],
                icon: "settings",
                // Corrected URL to use githack for proper mime-type serving
                model: "https://raw.githack.com/Sawon76/3d_Portfolio/main/models/Iphone_14_pro_max.gltf",
                borderColor: "#38bdf8", 
                gradient: "linear-gradient(145deg, #38bdf8, #000)"
            },
            {
                title: "Mouse Model-1",
                description: "Prototype of a mouse",
                tags: ["3D Modeling"],
                icon: "cylinder",
                model: "https://raw.githack.com/Sawon76/3d_Portfolio/main/models/Mouse_2.gltf",
                borderColor: "#6366f1",
                gradient: "linear-gradient(145deg, #6366f1, #000)"
            },
            {
                title: "Train Engine",
                description: "Train Engine Model",
                tags: ["3D Modeling"],
                icon: "wrench",
                model: "https://raw.githack.com/Sawon76/3d_Portfolio/main/models/Train.gltf",
                borderColor: "#10b981",
                gradient: "linear-gradient(145deg, #10b981, #000)"
            },
            {
                title: "Mouse Model-2",
                description: "Prototype of a mouse",
                tags: ["3D Modeling"],
                icon: "wrench",
                model: "https://raw.githack.com/Sawon76/3d_Portfolio/main/models/Mouse_3.gltf",
                borderColor: "#10b981",
                gradient: "linear-gradient(145deg, #10b981, #000)"
            },
            {
                title: "Tea Pot",
                description: "Tea Pot Model",
                tags: ["3D Modeling | Surfacing"],
                icon: "wrench",
                model: "https://raw.githack.com/Sawon76/3d_Portfolio/main/models/Surface.gltf",
                borderColor: "#10b981",
                gradient: "linear-gradient(145deg, #10b981, #000)"
            },
        ];

        // --- CERTIFICATIONS DATA ---
        const myCertifications = [
            {
                icon: "award",
                title: "CSWA - Certified Associate",
                subtitle: "Dassault Systèmes",
                handle: "ID: C-123456789",
                borderColor: "#38bdf8", // Cyan
                gradient: "linear-gradient(145deg, #38bdf8, #000)",
                // Changed to a raw.githack link to demonstrate the PDF.js viewer. 
                // Real Google Drive links will still fallback to iframe.
                url: "https://raw.githack.com/mozilla/pdf.js/ba2edeae/examples/learning/helloworld.pdf" 
            },
            {
                icon: "shield-check",
                title: "SOLIDWORKS : For Students, Engineers, and Designers",
                subtitle: "By UDEMY",
                handle: "Completed",
                borderColor: "#6366f1", // Indigo
                gradient: "linear-gradient(180deg, #6366f1, #000)",
                url: "https://raw.githack.com/Sawon76/3d_Portfolio/22aa5b25edd6af2bda674da409544cf4d7362004/Certificates/udemy%20solidworks%20certificate.pdf"
            },
            {
                icon: "file-badge",
                title: "AutoCAD Professional",
                subtitle: "Autodesk",
                handle: "Active",
                borderColor: "#3b82f6", // Blue
                gradient: "linear-gradient(145deg, #3b82f6, #000)",
                url: "https://raw.githack.com/mozilla/pdf.js/ba2edeae/examples/learning/helloworld.pdf"
            },
            {
                icon: "book-open",
                title: "Supply Chain Management",
                subtitle: "University Honors",
                handle: "Completed",
                borderColor: "#10b981", // Emerald
                gradient: "linear-gradient(145deg, #10b981, #000)",
                url: "https://raw.githack.com/mozilla/pdf.js/ba2edeae/examples/learning/helloworld.pdf"
            }
        ];

        // --- ACHIEVEMENTS DATA ---
        // Note: Set 'image' to null to auto-fetch from 'link'. 
        // If auto-fetch fails (e.g. LinkedIn blocks bots), it falls back to a default placeholder.
        const myAchievements = [
            {
                title: "Best Innovation Award",
                description: "Secured 1st place in the National Engineering Design Contest 2024.",
                image: null, // Set to null to test auto-fetch
                link: "https://www.nasa.gov/", // Example link that usually has good meta images
                icon: "trophy"
            },
            {
                title: "Hult Prize Finalist",
                description: "Regional finalist for sustainable business model pitching.",
                image: "https://images.unsplash.com/photo-1569512608383-207936a28292?auto=format&fit=crop&q=80&w=800", // Manual override
                link: "https://www.hultprize.org/",
                icon: "medal"
            },
            {
                title: "Robotics Competition",
                description: "Team lead for autonomous robot navigation challenge.",
                image: null, // Auto-fetch
                link: "https://github.com/", // Github usually fetches well
                icon: "cpu"
            }
        ];

        // --- RESEARCH DATA ---
        const myResearch = [
            {
                title: "Supply Chain Optimization",
                subtitle: "International Journal of Industrial Engineering",
                handle: "Published: 2024",
                url: "https://raw.githack.com/mozilla/pdf.js/ba2edeae/examples/learning/helloworld.pdf", // Placeholder PDF
                icon: "book-open"
            },
            {
                title: "Sustainable Manufacturing",
                subtitle: "Conference Paper on Green Tech",
                handle: "Under Review",
                url: "https://raw.githack.com/mozilla/pdf.js/ba2edeae/examples/learning/helloworld.pdf", // Placeholder PDF
                icon: "flask-conical"
            }
        ];

        // ============================================
        // --- END CONFIGURATION SECTION ---
        // ============================================
        
        // --- SECURITY: DISABLE DEVELOPER TOOLS & CONTEXT MENU ---
        document.addEventListener('contextmenu', (e) => e.preventDefault());

        document.onkeydown = function(e) {
            // F12
            if(e.keyCode == 123) {
                return false;
            }
            // Ctrl+Shift+I (Windows) / Cmd+Option+I (Mac)
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) {
                return false;
            }
            if(e.metaKey && e.altKey && e.keyCode == 'I'.charCodeAt(0)) {
                return false;
            }
            // Ctrl+Shift+C (Windows) / Cmd+Option+C (Mac)
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) {
                return false;
            }
            if(e.metaKey && e.altKey && e.keyCode == 'C'.charCodeAt(0)) {
                return false;
            }
            // Ctrl+Shift+J (Windows) / Cmd+Option+J (Mac)
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) {
                return false;
            }
            if(e.metaKey && e.altKey && e.keyCode == 'J'.charCodeAt(0)) {
                return false;
            }
            // Ctrl+U (View Source)
            if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) {
                return false;
            }
            if(e.metaKey && e.keyCode == 'U'.charCodeAt(0)) {
                return false;
            }
            // Ctrl+S (Save Page)
            if(e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) {
                return false;
            }
            if(e.metaKey && e.keyCode == 'S'.charCodeAt(0)) {
                return false;
            }
        }

        // Toast Notification Function
        function showToast(message) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            
            container.appendChild(toast);
            
            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        // --- DOCK VISIBILITY HELPER ---
        function toggleDock(show) {
            const dock = document.querySelector('.dock-container');
            if (dock) {
                dock.style.opacity = show ? '1' : '0';
                dock.style.pointerEvents = show ? 'auto' : 'none';
            }
        }

        // --- RESUME MODAL LOGIC ---
        function openResumeModal() {
            document.getElementById('resume-modal').classList.remove('hidden');
            toggleDock(false);
        }

        function closeResumeModal() {
            document.getElementById('resume-modal').classList.add('hidden');
            toggleDock(true);
        }

        // 3D Viewer Logic
        function open3DViewer(modelUrl, title) {
            const modal = document.getElementById('model-modal');
            const viewer = document.getElementById('main-viewer');
            const titleEl = document.querySelector('#model-title span');
            titleEl.textContent = title;
            viewer.src = modelUrl;
            modal.classList.remove('hidden');
            toggleDock(false);
        }

        function close3DViewer() {
            const modal = document.getElementById('model-modal');
            const viewer = document.getElementById('main-viewer');
            modal.classList.add('hidden');
            toggleDock(true);
            setTimeout(() => { viewer.src = ""; }, 300);
        }

        // --- PDF VIEWER LOGIC (Custom PDF.js Implementation) ---
        let pdfDoc = null;
        let pageNum = 1;
        let pageRendering = false;
        let pageNumPending = null;
        const scale = 1.5;
        const canvas = document.getElementById('pdf-canvas');
        const ctx = canvas.getContext('2d');

        function renderPage(num) {
            pageRendering = true;
            // Fetch page
            pdfDoc.getPage(num).then(function(page) {
                const viewport = page.getViewport({scale: scale});
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                // Render PDF page into canvas context
                const renderContext = {
                    canvasContext: ctx,
                    viewport: viewport
                };
                const renderTask = page.render(renderContext);

                // Wait for render to finish
                renderTask.promise.then(function() {
                    pageRendering = false;
                    if (pageNumPending !== null) {
                        renderPage(pageNumPending);
                        pageNumPending = null;
                    }
                });
            });

            // Update page counters
            document.getElementById('pdf-page-num').textContent = num;
        }

        function queueRenderPage(num) {
            if (pageRendering) {
                pageNumPending = num;
            } else {
                renderPage(num);
            }
        }

        function onPrevPage() {
            if (pageNum <= 1) {
                return;
            }
            pageNum--;
            queueRenderPage(pageNum);
        }

        function onNextPage() {
            if (pageNum >= pdfDoc.numPages) {
                return;
            }
            pageNum++;
            queueRenderPage(pageNum);
        }

        document.getElementById('pdf-prev').addEventListener('click', onPrevPage);
        document.getElementById('pdf-next').addEventListener('click', onNextPage);

        function openPdfViewer(url) {
            if (!url || url === '#' || url.includes('PASTE_YOUR')) {
                showToast("Please update the PDF link in the HTML code.");
                return;
            }

            const modal = document.getElementById('pdf-modal');
            const iframe = document.getElementById('pdf-frame');
            const canvas = document.getElementById('pdf-canvas');
            const controls = document.getElementById('pdf-controls');
            const loader = document.getElementById('pdf-loader');

            modal.classList.remove('hidden');
            toggleDock(false);
            loader.classList.remove('hidden');

            // Check if Google Drive Link (Fallback to iframe, implies controls exist)
            // OR if it's a direct PDF link (Use custom viewer)
            if (url.includes('drive.google.com')) {
                // Google Drive Logic (Fallback)
                // Convert view/preview links if needed
                let previewUrl = url;
                const idMatch = url.match(/\/d\/(.*?)\//);
                if (idMatch && idMatch[1]) {
                    previewUrl = `https://drive.google.com/file/d/${idMatch[1]}/preview`;
                }
                
                canvas.classList.add('hidden');
                controls.classList.add('hidden');
                iframe.classList.remove('hidden');
                iframe.src = previewUrl;
                loader.classList.add('hidden'); // Iframe handles its own loading UI mostly
            } else {
                // Direct PDF Logic (Custom Viewer)
                iframe.classList.add('hidden');
                canvas.classList.remove('hidden');
                controls.classList.remove('hidden');

                // Load PDF
                pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
                    pdfDoc = pdfDoc_;
                    document.getElementById('pdf-page-count').textContent = pdfDoc.numPages;
                    pageNum = 1;
                    renderPage(pageNum);
                    loader.classList.add('hidden');
                }).catch(function(error) {
                    console.error('Error loading PDF:', error);
                    showToast("Error loading PDF. Check CORS settings or URL.");
                    loader.classList.add('hidden');
                });
            }
        }

        function closePdfViewer() {
            const modal = document.getElementById('pdf-modal');
            const iframe = document.getElementById('pdf-frame');
            const canvas = document.getElementById('pdf-canvas');
            const ctx = canvas.getContext('2d');
            
            modal.classList.add('hidden');
            toggleDock(true);
            
            // Cleanup
            setTimeout(() => { 
                iframe.src = ""; 
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                if(pdfDoc) {
                    pdfDoc.destroy();
                    pdfDoc = null;
                }
            }, 300); 
        }

        // --- PAGINATION STATE ---
        let projectsLimit = 3;
        let certsLimit = 3;
        let achievementsLimit = 3; // NEW state variable
        let researchLimit = 3;     // NEW state variable
        const ITEMS_PER_PAGE = 3;

        // --- NEW 3D CARD RENDER LOGIC ---
        function renderProjects() {
            const container = document.getElementById('projects-grid');
            if (!container) return;

            // Using standard grid layout
            container.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8';

            // Slice data based on limit
            const visibleProjects = myProjects.slice(0, projectsLimit);

            // Applying the user's requested 3D Card Style
            // Note: Replacing chroma-card with 3D card structure
            container.innerHTML = visibleProjects.map(project => `
                <div class="card-container-3d group/card relative h-auto w-full">
                    <div 
                        class="card-body-3d relative size-auto rounded-xl border border-white/20 bg-black p-6 hover:shadow-2xl hover:shadow-emerald-500/[0.1]"
                    >
                        <div class="card-item-3d" style="transform: translateZ(50px)">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="p-2 bg-white/10 rounded-lg border border-white/10">
                                    <i data-lucide="${project.icon}" class="w-6 h-6 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white">
                                    ${project.title}
                                </h3>
                            </div>
                        </div>
                        
                        <div class="card-item-3d mt-2 max-w-sm text-sm text-neutral-300" style="transform: translateZ(60px)">
                            <p>${project.description}</p>
                        </div>
                        
                        <div class="card-item-3d mt-6 w-full" style="transform: translateZ(80px)">
                            <div class="h-48 w-full rounded-xl bg-gradient-to-br from-gray-900 to-black border border-white/10 flex items-center justify-center group-hover/card:shadow-xl overflow-hidden pointer-events-none">
                                <!-- Using placeholder 3D preview image or icon since actual image isn't provided -->
                                <model-viewer 
                                    src="${project.model}" 
                                    auto-rotate 
                                    camera-controls
                                    disable-zoom
                                    style="width: 100%; height: 100%;"
                                    exposure="0.5"
                                ></model-viewer>
                            </div>
                        </div>
                        
                        <div class="mt-10 flex items-center justify-between">
                            <div class="card-item-3d flex flex-wrap gap-2" style="transform: translateZ(60px)">
                                ${project.tags.map(tag => `<span class="text-[10px] bg-white/10 px-2 py-1 rounded-full border border-white/5 text-white">${tag}</span>`).join('')}
                            </div>
                            
                            <div class="card-item-3d" style="transform: translateZ(120px)">
                                <button 
                                    onclick="open3DViewer('${project.model}', '${project.title}')"
                                    class="rounded-xl bg-white px-4 py-2 text-xs font-bold text-black hover:bg-gray-200 transition-colors pointer-events-auto relative z-50"
                                >
                                    View 3D
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Add Show More / Show Less Button
            const btnContainer = document.createElement('div');
            btnContainer.className = 'col-span-1 md:col-span-2 lg:col-span-3 flex justify-center mt-8';

            if (projectsLimit < myProjects.length) {
                // SHOW MORE state
                btnContainer.innerHTML = `
                    <button id="load-more-projects" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show more <i data-lucide="arrow-down" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);
                
                document.getElementById('load-more-projects').addEventListener('click', () => {
                    projectsLimit += ITEMS_PER_PAGE;
                    renderProjects();
                });
            } else if (myProjects.length > ITEMS_PER_PAGE) {
                // SHOW LESS state (only if we have expanded beyond initial count)
                btnContainer.innerHTML = `
                    <button id="show-less-projects" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show less <i data-lucide="arrow-up" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);

                document.getElementById('show-less-projects').addEventListener('click', () => {
                    projectsLimit = ITEMS_PER_PAGE;
                    renderProjects();
                    // Optional: scroll to top of section
                    // document.getElementById('projects').scrollIntoView({ behavior: 'smooth' });
                });
            }

            if (typeof lucide !== 'undefined') lucide.createIcons();
            init3DCards(); // Initialize event listeners for 3D effect
        }

        // --- CHROMA GRID IMPLEMENTATION (Vanilla JS) ---
        function initChromaGrid() {
            const container = document.getElementById('chroma-container');
            if(!container) return;
            
            // Using standard grid layout to match new style
            container.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8';
            
            // Slice data based on limit
            const visibleCerts = myCertifications.slice(0, certsLimit);
            
            // 1. Render Cards with 3D Style
            container.innerHTML = visibleCerts.map(c => `
                <div class="card-container-3d group/card relative h-auto w-full">
                    <div 
                        class="card-body-3d relative size-auto rounded-xl border border-white/20 bg-black p-6 hover:shadow-2xl hover:shadow-emerald-500/[0.1]"
                    >
                        <div class="card-item-3d" style="transform: translateZ(50px)">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="p-2 bg-white/10 rounded-lg border border-white/10">
                                    <i data-lucide="${c.icon}" class="w-6 h-6 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white">
                                    ${c.title}
                                </h3>
                            </div>
                        </div>
                        
                        <div class="card-item-3d mt-2 text-sm text-neutral-300" style="transform: translateZ(60px)">
                            <p>${c.subtitle}</p>
                        </div>
                        
                        <div class="mt-10 flex items-center justify-between">
                            <div class="card-item-3d" style="transform: translateZ(20px)">
                                <span class="text-xs font-mono text-gray-400">${c.handle}</span>
                            </div>
                            
                            <div class="card-item-3d" style="transform: translateZ(100px)">
                                <button 
                                    onclick="openPdfViewer('${c.url}')"
                                    class="rounded-xl bg-white px-4 py-2 text-xs font-bold text-black hover:bg-gray-200 transition-colors pointer-events-auto relative z-50"
                                >
                                    Show
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Add Show More / Show Less Button
            const btnContainer = document.createElement('div');
            btnContainer.className = 'col-span-1 md:col-span-2 lg:col-span-3 flex justify-center mt-8';

            if (certsLimit < myCertifications.length) {
                // SHOW MORE
                btnContainer.innerHTML = `
                    <button id="load-more-certs" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show more <i data-lucide="arrow-down" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);
                
                document.getElementById('load-more-certs').addEventListener('click', () => {
                    certsLimit += ITEMS_PER_PAGE;
                    initChromaGrid();
                });
            } else if (myCertifications.length > ITEMS_PER_PAGE) {
                // SHOW LESS
                btnContainer.innerHTML = `
                    <button id="show-less-certs" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show less <i data-lucide="arrow-up" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);

                document.getElementById('show-less-certs').addEventListener('click', () => {
                    certsLimit = ITEMS_PER_PAGE;
                    initChromaGrid();
                });
            }
            
            // Re-init icons for new content
            if (typeof lucide !== 'undefined') lucide.createIcons();
            init3DCards(); // Initialize event listeners for 3D effect
        }

        // --- 3D CARD LOGIC (Vanilla JS Port) ---
        function init3DCards() {
            const containers = document.querySelectorAll('.card-container-3d');
            
            containers.forEach(container => {
                const body = container.querySelector('.card-body-3d');
                
                container.addEventListener('mousemove', (e) => {
                    const rect = container.getBoundingClientRect();
                    const width = rect.width;
                    const height = rect.height;
                    const mouseX = e.clientX - rect.left;
                    const mouseY = e.clientY - rect.top;
                    
                    const xPct = mouseX / width - 0.5;
                    const yPct = mouseY / height - 0.5;
                    
                    const x = (yPct * 20); // Rotate X based on Y position
                    const y = (xPct * -20); // Rotate Y based on X position
                    
                    body.style.transform = `rotateX(${x}deg) rotateY(${y}deg)`;
                });
                
                container.addEventListener('mouseenter', () => {
                    body.style.transition = 'none';
                });
                
                container.addEventListener('mouseleave', () => {
                    body.style.transition = 'transform 0.5s ease';
                    body.style.transform = `rotateX(0deg) rotateY(0deg)`;
                });
            });
        }

        // --- DOCK PHYSICS LOGIC ---
        function initDock() {
            const dockItems = document.querySelectorAll('.dock-item');
            const dockPanel = document.querySelector('.dock-panel');

            if (!dockPanel) return;

            // --- SOUND ENGINE SETUP ---
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const audioCtx = new AudioContext();

            const playSound = (type) => {
                // Browser policy requires user interaction to start audio context
                if (audioCtx.state === 'suspended') {
                    audioCtx.resume();
                }

                const osc = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();

                osc.connect(gainNode);
                gainNode.connect(audioCtx.destination);

                const now = audioCtx.currentTime;

                if (type === 'hover') {
                    // Subtle "Tick" sound for hover
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(600, now);
                    osc.frequency.exponentialRampToValueAtTime(300, now + 0.03);
                    
                    gainNode.gain.setValueAtTime(0.03, now); // Very quiet
                    gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.03);
                    
                    osc.start(now);
                    osc.stop(now + 0.03);
                }
            };

            const baseSize = 40; // px
            const maxScale = 1.5; // Magnification factor
            const range = 150; // px radius for effect

            // Mouse Move (Magnification)
            dockPanel.addEventListener('mousemove', (e) => {
                // Detect orientation based on screen width (matches CSS media query)
                const isVertical = window.innerWidth > 640;
                
                // Use Y axis for vertical dock, X axis for horizontal dock
                const mousePos = isVertical ? e.clientY : e.clientX;
                
                dockItems.forEach(item => {
                    const rect = item.getBoundingClientRect();
                    
                    // Calculate center based on orientation
                    const center = isVertical 
                        ? rect.top + rect.height / 2 
                        : rect.left + rect.width / 2;
                        
                    const distance = Math.abs(mousePos - center);
                    
                    let scale = 1;
                    if (distance < range) {
                        // Calculate scale based on sine curve for smooth falloff
                        const val = 1 - distance / range;
                        scale = 1 + (maxScale - 1) * Math.sin(val * Math.PI / 2);
                    }
                    
                    item.style.width = `${baseSize * scale}px`;
                    item.style.height = `${baseSize * scale}px`;
                });
            });

            // Mouse Leave (Reset)
            dockPanel.addEventListener('mouseleave', () => {
                dockItems.forEach(item => {
                    item.style.width = `${baseSize}px`;
                    item.style.height = `${baseSize}px`;
                });
            });

            // Attach Sound Events (Hover only)
            dockItems.forEach(item => {
                item.addEventListener('mouseenter', () => playSound('hover'));
            });
        }

        // --- LIQUID GLASS EFFECT LOGIC (PORTED FROM VUE) ---
        function initLiquidGlass() {
            const dockPanel = document.querySelector('.dock-panel');
            const filterImage = document.querySelector('#liquid-displacement-image'); // The feImage element

            if (!dockPanel || !filterImage) return;

            const updateFilter = () => {
                const rect = dockPanel.getBoundingClientRect();
                const width = rect.width;
                const height = rect.height;
                const radius = 24; // Must match CSS border-radius
                const border = Math.min(width, height) * 0.035; // approx prop.border (0.07) * 0.5 from Vue code

                // Construct SVG String (The "Map")
                // This mimics the 'displacementImage' computed property from the Vue code
                // It creates a black rect, then a red/blue gradient rect, then an inner rect with blur
                const svg = `
                <svg viewBox="0 0 ${width} ${height}" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="red" x1="100%" y1="0%" x2="0%" y2="0%">
                            <stop offset="0%" stop-color="#0000"/>
                            <stop offset="100%" stop-color="red"/>
                        </linearGradient>
                        <linearGradient id="blue" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" stop-color="#0000"/>
                            <stop offset="100%" stop-color="blue"/>
                        </linearGradient>
                    </defs>
                    <rect x="0" y="0" width="${width}" height="${height}" fill="black"></rect>
                    <rect x="0" y="0" width="${width}" height="${height}" rx="${radius}" fill="url(#red)" />
                    <rect x="0" y="0" width="${width}" height="${height}" rx="${radius}" fill="url(#blue)" style="mix-blend-mode: difference" />
                    <rect 
                        x="${border}" 
                        y="${border}" 
                        width="${width - border * 2}" 
                        height="${height - border * 2}" 
                        rx="${radius}" 
                        fill="rgba(255,255,255,0.93)" 
                        style="filter:blur(11px)" 
                    />
                </svg>`;

                // Encode and set as href
                // Use robust replacement to remove newlines for data URI
                const encoded = encodeURIComponent(svg.replace(/\s+/g, " ")); 
                filterImage.setAttribute('href', `data:image/svg+xml,${encoded}`);
            };

            // Initialize Observer to update map when dock resizes (on hover physics)
            const observer = new ResizeObserver(updateFilter);
            observer.observe(dockPanel);
            
            // Initial call
            updateFilter();
        }

        // --- SILK SHADER BACKGROUND (Vanilla Three.js) ---
        function initSilkShader() {
            const container = document.getElementById('shader-background');
            if (!container) return;

            // SHADER CODE FROM USER
            const fragmentShader = `
                #define INVERT 1

                uniform float iTime;
                uniform vec3  iResolution;
                uniform vec4  iMouse;

                float noise(vec2 p) {
                    return smoothstep(-0.5, 0.9, sin((p.x - p.y) * 555.0) * sin(p.y * 1444.0)) - 0.4;
                }

                float fabric(vec2 p) {
                    const mat2 m = mat2(1.6, 1.2, -1.2, 1.6);
                    float f = 0.4 * noise(p);
                    f += 0.3 * noise(p = m * p);
                    f += 0.2 * noise(p = m * p);
                    return f + 0.1 * noise(m * p);
                }

                float silk(vec2 uv, float t) {
                    float s = sin(5.0 * (uv.x + uv.y + cos(2.0 * uv.x + 5.0 * uv.y)) + sin(12.0 * (uv.x + uv.y)) - t);
                    s = 0.7 + 0.3 * (s * s * 0.5 + s);
                    s *= 0.9 + 0.6 * fabric(uv * min(iResolution.x, iResolution.y) * 0.0006);
                    return s * 0.9 + 0.1;
                }

                float silkd(vec2 uv, float t) {
                    float xy = uv.x + uv.y;
                    float d = (5.0 * (1.0 - 2.0 * sin(2.0 * uv.x + 5.0 * uv.y)) + 12.0 * cos(12.0 * xy)) * cos(5.0 * (cos(2.0 * uv.x + 5.0 * uv.y) + xy) + sin(12.0 * xy) - t);
                    return 0.005 * d * (sign(d) + 3.0);
                }

                void mainImage(out vec4 fragColor, vec2 fragCoord) {
                    float mr = min(iResolution.x, iResolution.y);
                    vec2 uv = fragCoord / mr;

                    float t = iTime;
                    uv.y += 0.03 * sin(8.0 * uv.x - t);

                    if (iMouse.z > 1.0)
                        uv += smoothstep(0.5, 0.0, distance(iMouse.xy / mr, uv)) * 0.08;
                    
                    float s = sqrt(silk(uv, t));
                    float d = silkd(uv, t);

                    vec3 c = vec3(s);
                    c += 0.7 * vec3(1, 0.83, 0.6) * d;
                    c *= 1.0 - max(0.0, 0.8 * d);
                    
                    #if INVERT
                        c = pow(c, 0.3 / vec3(0.52, 0.5, 0.4));
                        c = 1.0 - c;
                    #else
                        c = pow(c, vec3(0.52, 0.5, 0.4));
                    #endif

                    fragColor = vec4(c, 1);
                }

                void main() {
                    mainImage(gl_FragColor, gl_FragCoord.xy);
                }
            `;

            const vertexShader = `
                void main() {
                    gl_Position = vec4( position, 1.0 );
                }
            `;

            const scene = new THREE.Scene();
            const camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );

            const renderer = new THREE.WebGLRenderer({ alpha: true }); // Allow transparency
            renderer.setSize( container.clientWidth, container.clientHeight );
            container.appendChild( renderer.domElement );

            const uniforms = {
                iTime: { value: 0 },
                iResolution: { value: new THREE.Vector3(container.clientWidth, container.clientHeight, 1) },
                iMouse: { value: new THREE.Vector4() } // xy = current, zw = click
            };

            const material = new THREE.ShaderMaterial({
                uniforms: uniforms,
                vertexShader: vertexShader,
                fragmentShader: fragmentShader
            });

            const geometry = new THREE.PlaneGeometry( 2, 2 );
            const mesh = new THREE.Mesh( geometry, material );
            scene.add( mesh );

            const startTime = Date.now();

            function animate() {
                requestAnimationFrame( animate );
                uniforms.iTime.value = (Date.now() - startTime) * 0.001;
                renderer.render( scene, camera );
            }

            animate();

            // Handle Resize
            window.addEventListener( 'resize', onWindowResize, false );
            function onWindowResize() {
                renderer.setSize( container.clientWidth, container.clientHeight );
                uniforms.iResolution.value.set( container.clientWidth, container.clientHeight, 1 );
            }

            // Handle Mouse Interactions for the Shader
            let isMouseDown = false;
            
            document.addEventListener('mousemove', (e) => {
                const rect = renderer.domElement.getBoundingClientRect();
                const x = e.clientX - rect.left; 
                const y = container.clientHeight - (e.clientY - rect.top); // Flip Y for shader coords
                
                if(isMouseDown) {
                    uniforms.iMouse.value.x = x;
                    uniforms.iMouse.value.y = y;
                }
            });

            document.addEventListener('mousedown', (e) => {
                isMouseDown = true;
                const rect = renderer.domElement.getBoundingClientRect();
                const x = e.clientX - rect.left; 
                const y = container.clientHeight - (e.clientY - rect.top);
                
                uniforms.iMouse.value.x = x;
                uniforms.iMouse.value.y = y;
                uniforms.iMouse.value.z = x; // Click pos X
                uniforms.iMouse.value.w = y; // Click pos Y
            });

            document.addEventListener('mouseup', () => {
                isMouseDown = false;
                // In ShaderToy, z/w become negative to indicate release, but often just tracking click state is enough
                uniforms.iMouse.value.z = -Math.abs(uniforms.iMouse.value.z);
                uniforms.iMouse.value.w = -Math.abs(uniforms.iMouse.value.w);
            });
        }

        // --- TEXT PARTICLE EFFECT (Inspira Style) ---
        function initTextParticles() {
            const canvas = document.getElementById('text-particle-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let particles = [];
            let animationId;
            
            // Configuration
            const particleSize = 1.5; // Size of dots
            const mouseRadius = 100; // Increased interaction radius
            const mouseForce = 20; // How hard they push away
            const returnSpeed = 0.015; // Decreased speed for smoother return (was 0.08)
            const friction = 0.95; // Increased friction for smoother damping (was 0.9)
            
            let mouse = { x: null, y: null };
            
            // Font settings
            const fontBaseSize = 100; // Base font size for calculation
            const fontFamily = "'Cinzel', serif";
            
            class Particle {
                constructor(x, y) {
                    this.x = Math.random() * canvas.width; // Random start for effect
                    this.y = Math.random() * canvas.height;
                    this.baseX = x; // Target position (text shape)
                    this.baseY = y;
                    this.density = (Math.random() * 30) + 1;
                    this.vx = 0;
                    this.vy = 0;
                }
                
                draw() {
                    ctx.fillStyle = 'white';
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, particleSize, 0, Math.PI * 2);
                    ctx.closePath();
                    ctx.fill();
                }
                
                update() {
                    // Mouse Interaction
                    let dx = mouse.x - this.x;
                    let dy = mouse.y - this.y;
                    let distance = Math.sqrt(dx * dx + dy * dy);
                    let forceDirectionX = dx / distance;
                    let forceDirectionY = dy / distance;
                    let maxDistance = mouseRadius;
                    let force = (maxDistance - distance) / maxDistance;
                    let directionX = forceDirectionX * force * this.density;
                    let directionY = forceDirectionY * force * this.density;
                    
                    if (distance < mouseRadius) {
                        // Push away
                        this.vx -= directionX * 2; // Multiplier for punchiness
                        this.vy -= directionY * 2;
                    } else {
                        // Return to base
                        if (this.x !== this.baseX) {
                            let dx = this.x - this.baseX;
                            this.vx -= dx * returnSpeed; // Ease back
                        }
                        if (this.y !== this.baseY) {
                            let dy = this.y - this.baseY;
                            this.vy -= dy * returnSpeed;
                        }
                    }
                    
                    // Apply Velocity & Friction
                    this.vx *= friction;
                    this.vy *= friction;
                    
                    this.x += this.vx;
                    this.y += this.vy;
                }
            }
            
            function init() {
                const container = document.getElementById('particle-text-container');
                if (!container) return;

                // Force integer values
                const w = Math.floor(container.offsetWidth);
                const h = Math.floor(container.offsetHeight);

                // Safety check for 0 dimensions (wait for layout)
                if (w === 0 || h === 0) {
                    return requestAnimationFrame(init);
                }

                canvas.width = w;
                canvas.height = h;
                
                particles = [];
                
                // 2. Create Offscreen Canvas for Text Data
                const textCtx = document.createElement('canvas').getContext('2d');
                textCtx.canvas.width = w;
                textCtx.canvas.height = h;
                
                // 3. Draw Text on Offscreen Canvas
                // Dynamic Font Sizing Logic to fit container
                const isMobile = w < 768;
                let fontSize;

                if (isMobile) {
                    // Stacked on Mobile: font size limited by width (longest word) or half height
                    // "MUKHERJEE" is roughly 9 chars wide.
                    // We want padding, so let's say width / 10 is roughly char width.
                    fontSize = Math.min(h * 0.35, w * 0.13);
                } else {
                    // Single Line on Desktop: limited by height or full width
                    // "SAWON MUKHERJEE" is approx 15 chars.
                    fontSize = Math.min(h * 0.6, w * 0.08); 
                }

                // Clamp values to reasonable limits
                fontSize = Math.max(30, Math.min(fontSize, 100));
                
                textCtx.font = `700 ${fontSize}px ${fontFamily}`;
                textCtx.fillStyle = 'white';
                textCtx.textAlign = 'center';
                textCtx.textBaseline = 'middle';
                
                const text1 = "SAWON";
                const text2 = "MUKHERJEE";
                
                if (isMobile) {
                    // Stacked on Mobile
                    const lineHeight = fontSize * 1.1;
                    textCtx.fillText(text1, w / 2, h / 2 - lineHeight * 0.55);
                    textCtx.fillText(text2, w / 2, h / 2 + lineHeight * 0.55);
                } else {
                    // Single Line on Desktop
                    textCtx.fillText(text1 + " " + text2, w / 2, h / 2);
                }
                
                // 4. Scan Pixel Data
                const textCoordinates = textCtx.getImageData(0, 0, w, h);
                
                // Optimization: Adjust step based on screen size/pixel density
                // Smaller step = clearer text but heavier performance
                const step = isMobile ? 2 : 3; 
                
                for (let y = 0; y < h; y += step) {
                    for (let x = 0; x < w; x += step) {
                        // Alpha channel check (> 128 means visible pixel)
                        if (textCoordinates.data[(y * 4 * w) + (x * 4) + 3] > 128) {
                            particles.push(new Particle(x, y));
                        }
                    }
                }
            }
            
            function animate() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Optional: Connect particles with lines if close (disabled for performance/clean look)
                // ...

                for (let i = 0; i < particles.length; i++) {
                    particles[i].draw();
                    particles[i].update();
                }
                animationId = requestAnimationFrame(animate);
            }
            
            // Mouse Handlers
            // Track mouse relative to canvas
            const container = document.getElementById('home'); // Use section for wider hit area
            
            container.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                mouse.x = e.clientX - rect.left;
                mouse.y = e.clientY - rect.top;
            });
            
            container.addEventListener('mouseleave', () => {
                mouse.x = null;
                mouse.y = null;
            });
            
            // Resize Handler
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    cancelAnimationFrame(animationId);
                    init();
                    animate();
                }, 100);
            });
            
            // Wait for fonts to load before initializing
            document.fonts.ready.then(() => {
                init();
                animate();
            });
        }

        // --- NEW: RENDER ACHIEVEMENTS FUNCTION (WITH AUTO-FETCH & PAGINATION) ---
        async function renderAchievements() {
            const container = document.getElementById('achievements-container');
            if (!container) return;

            // Using standard grid layout
            container.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8';

            // Slice data based on limit
            const visibleAchievements = myAchievements.slice(0, achievementsLimit);

            // 1. Render Cards with Loading State or Manual Image
            container.innerHTML = visibleAchievements.map((item, index) => {
                // If image exists, use it. If not, use a placeholder/loader and add a special ID to fetch later.
                const hasManualImage = !!item.image;
                const imgId = `ach-img-${index}`;
                const loadingId = `ach-load-${index}`;
                const imgSrc = hasManualImage ? item.image : 'https://via.placeholder.com/800x400?text=Loading+Preview...'; // Temporary placeholder

                return `
                <div class="card-container-3d group/card relative h-auto w-full">
                    <div class="card-body-3d relative size-auto rounded-xl border border-white/20 bg-black p-6 hover:shadow-2xl hover:shadow-cyan-500/[0.1]">
                        <div class="card-item-3d" style="transform: translateZ(50px)">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="p-2 bg-white/10 rounded-lg border border-white/10">
                                    <i data-lucide="${item.icon}" class="w-6 h-6 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white">${item.title}</h3>
                            </div>
                        </div>
                        
                        <div class="card-item-3d mt-2 text-sm text-neutral-300" style="transform: translateZ(60px)">
                            <p>${item.description}</p>
                        </div>
                        
                        <div class="card-item-3d mt-6 w-full" style="transform: translateZ(80px)">
                            <div class="h-48 w-full rounded-xl border border-white/10 overflow-hidden relative group-hover/card:shadow-xl bg-gray-900">
                                ${!hasManualImage ? `
                                    <div id="${loadingId}" class="absolute inset-0 flex items-center justify-center bg-white/5 animate-pulse z-10">
                                        <i data-lucide="loader-2" class="w-6 h-6 text-white animate-spin"></i>
                                    </div>
                                ` : ''}
                                <img id="${imgId}" src="${imgSrc}" alt="${item.title}" class="w-full h-full object-cover transform transition-transform duration-500 group-hover/card:scale-110">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                            </div>
                        </div>
                        
                        <div class="mt-10 flex items-center justify-end">
                            <div class="card-item-3d" style="transform: translateZ(100px)">
                                <a href="${item.link}" target="_blank" class="flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-xs font-bold text-black hover:bg-gray-200 transition-colors pointer-events-auto relative z-50">
                                    View Details <i data-lucide="external-link" class="w-3 h-3"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            `}).join('');

            // Add Show More / Show Less Button
            const btnContainer = document.createElement('div');
            btnContainer.className = 'col-span-1 md:col-span-2 lg:col-span-3 flex justify-center mt-8';

            if (achievementsLimit < myAchievements.length) {
                // SHOW MORE
                btnContainer.innerHTML = `
                    <button id="load-more-achievements" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show more <i data-lucide="arrow-down" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);
                
                document.getElementById('load-more-achievements').addEventListener('click', () => {
                    achievementsLimit += ITEMS_PER_PAGE;
                    renderAchievements();
                });
            } else if (myAchievements.length > ITEMS_PER_PAGE) {
                // SHOW LESS
                btnContainer.innerHTML = `
                    <button id="show-less-achievements" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show less <i data-lucide="arrow-up" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);

                document.getElementById('show-less-achievements').addEventListener('click', () => {
                    achievementsLimit = ITEMS_PER_PAGE;
                    renderAchievements();
                });
            }
            
            // Re-init icons immediately for the static content
            if (typeof lucide !== 'undefined') lucide.createIcons();
            init3DCards(); 

            // 2. Perform Async Fetch for missing images (Only for visible items)
            visibleAchievements.forEach(async (item, index) => {
                // We use the same index as the map function above because we sliced the array beforehand
                if (!item.image && item.link) {
                    try {
                        const imgEl = document.getElementById(`ach-img-${index}`);
                        const loaderEl = document.getElementById(`ach-load-${index}`);
                        
                        // Skip if element not found (e.g. switched view rapidly)
                        if (!imgEl) return;

                        // Call Microlink API (Free Tier)
                        const response = await fetch(`https://api.microlink.io/?url=${encodeURIComponent(item.link)}`);
                        const data = await response.json();
                        
                        if (data.status === 'success' && data.data.image && data.data.image.url) {
                            imgEl.src = data.data.image.url;
                        } else {
                            // Fallback if no image found
                            imgEl.src = 'https://via.placeholder.com/800x400/1e293b/ffffff?text=No+Preview+Available';
                        }
                        
                        // Hide Loader
                        if (loaderEl) loaderEl.style.display = 'none';
                        
                    } catch (error) {
                        console.warn('Failed to fetch metadata for:', item.link);
                        const imgEl = document.getElementById(`ach-img-${index}`);
                        if(imgEl) imgEl.src = 'https://via.placeholder.com/800x400/1e293b/ffffff?text=Preview+Error';
                        const loaderEl = document.getElementById(`ach-load-${index}`);
                        if (loaderEl) loaderEl.style.display = 'none';
                    }
                }
            });
        }

        // --- NEW: RENDER RESEARCH FUNCTION (WITH PAGINATION) ---
        function renderResearch() {
             const container = document.getElementById('research-container');
            if (!container) return;

            // Using standard grid layout
            container.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8';

            // Slice data based on limit
            const visibleResearch = myResearch.slice(0, researchLimit);

            container.innerHTML = visibleResearch.map(item => `
                <div class="card-container-3d group/card relative h-auto w-full">
                    <div class="card-body-3d relative size-auto rounded-xl border border-white/20 bg-black p-6 hover:shadow-2xl hover:shadow-purple-500/[0.1]">
                        <div class="card-item-3d" style="transform: translateZ(50px)">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="p-2 bg-white/10 rounded-lg border border-white/10">
                                    <i data-lucide="${item.icon}" class="w-6 h-6 text-white"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white">${item.title}</h3>
                            </div>
                        </div>
                        
                        <div class="card-item-3d mt-2 text-sm text-neutral-300" style="transform: translateZ(60px)">
                            <p>${item.subtitle}</p>
                        </div>
                        
                        <div class="mt-10 flex items-center justify-between">
                             <div class="card-item-3d" style="transform: translateZ(20px)">
                                <span class="text-xs font-mono text-gray-400 bg-white/5 px-2 py-1 rounded">${item.handle}</span>
                            </div>

                            <div class="card-item-3d" style="transform: translateZ(100px)">
                                <button onclick="openPdfViewer('${item.url}')" class="rounded-xl bg-white px-4 py-2 text-xs font-bold text-black hover:bg-gray-200 transition-colors pointer-events-auto relative z-50">
                                    Read Paper
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Add Show More / Show Less Button
            const btnContainer = document.createElement('div');
            btnContainer.className = 'col-span-1 md:col-span-2 lg:col-span-3 flex justify-center mt-8';

            if (researchLimit < myResearch.length) {
                // SHOW MORE
                btnContainer.innerHTML = `
                    <button id="load-more-research" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show more <i data-lucide="arrow-down" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);
                
                document.getElementById('load-more-research').addEventListener('click', () => {
                    researchLimit += ITEMS_PER_PAGE;
                    renderResearch();
                });
            } else if (myResearch.length > ITEMS_PER_PAGE) {
                // SHOW LESS
                btnContainer.innerHTML = `
                    <button id="show-less-research" class="group relative px-6 py-2 md:px-8 md:py-3 overflow-hidden rounded-full bg-transparent border border-white/30 text-white transition-all hover:border-industrial-accent hover:text-industrial-accent cursor-pointer">
                        <span class="absolute top-0 left-0 w-full h-full bg-white/5 scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500"></span>
                        <span class="relative text-xs md:text-sm font-medium tracking-widest uppercase flex items-center">
                            Show less <i data-lucide="arrow-up" class="ml-2 w-3 h-3 md:w-4 md:h-4"></i>
                        </span>
                    </button>
                `;
                container.appendChild(btnContainer);

                document.getElementById('show-less-research').addEventListener('click', () => {
                    researchLimit = ITEMS_PER_PAGE;
                    renderResearch();
                });
            }
            
            if (typeof lucide !== 'undefined') lucide.createIcons();
            init3DCards();
        }

        // --- LOADING SCREEN LOGIC ---
        const initLoadingScreen = () => {
            const bar = document.getElementById('loader-bar');
            const barContainer = document.querySelector('.loader-bar-container');
            const nameReveal = document.getElementById('loader-name');
            const screen = document.getElementById('loading-screen');
            
            // Define Hoosh Sound Generator
            const playHooshSound = () => {
                try {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    const ctx = new AudioContext();
                    
                    // Resume context if suspended (browser policy)
                    if (ctx.state === 'suspended') {
                        ctx.resume();
                    }

                    // Create white noise buffer
                    const bufferSize = ctx.sampleRate * 2; // 2 seconds buffer
                    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
                    const data = buffer.getChannelData(0);
                    for (let i = 0; i < bufferSize; i++) {
                        data[i] = Math.random() * 2 - 1;
                    }

                    const noise = ctx.createBufferSource();
                    noise.buffer = buffer;

                    // Create Filter for the "Whoosh" sweep
                    const filter = ctx.createBiquadFilter();
                    filter.type = 'lowpass';
                    filter.Q.value = 1;

                    const gain = ctx.createGain();
                    
                    // Connect nodes
                    noise.connect(filter);
                    filter.connect(gain);
                    gain.connect(ctx.destination);

                    const now = ctx.currentTime;

                    // --- SOUND ENVELOPE ---
                    // 1. Filter Sweep (Low to High freq makes the "Whoosh")
                    filter.frequency.setValueAtTime(100, now); 
                    filter.frequency.exponentialRampToValueAtTime(3000, now + 0.8); // Sweep up to 3kHz

                    // 2. Volume Envelope (Fade in -> Fade out)
                    gain.gain.setValueAtTime(0, now);
                    gain.gain.linearRampToValueAtTime(0.15, now + 0.2); // Attack
                    gain.gain.exponentialRampToValueAtTime(0.001, now + 1.2); // Long Decay

                    noise.start(now);
                    noise.stop(now + 1.5);
                } catch (e) {
                    // console.warn("Audio autoplay blocked by browser policy", e);
                }
            };

            let progress = 0;
            const duration = 1500; 
            const intervalTime = duration / 100;
            
            const interval = setInterval(() => {
                progress++;
                bar.style.width = progress + "%";
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // 1. Fade out the bar
                    barContainer.style.opacity = '0';
                    
                    setTimeout(() => {
                        barContainer.style.display = 'none';
                        
                        // PLAY SOUND HERE
                        playHooshSound();

                        // 2. Trigger BlurText Animation
                        nameReveal.style.display = 'block';
                        animateBlurText(nameReveal);

                        // 3. Slide Curtain Up after reading the name
                        setTimeout(() => {
                            screen.classList.add('slide-up-exit');
                            document.body.style.overflow = 'auto'; // Enable scrolling
                            
                            // Reveal the Dock
                            const dock = document.querySelector('.dock-container');
                            if (dock) {
                                dock.style.opacity = '1';
                                dock.style.pointerEvents = 'auto';
                            }

                            // Cleanup DOM after animation finishes
                            setTimeout(() => {
                                screen.style.display = 'none';
                            }, 1000); 
                            
                        }, 2200); // Wait for text animation + reading time
                        
                    }, 300);
                }
            }, intervalTime);
        };

        // --- Vanilla JS Adaptation of BlurText ---
        function animateBlurText(element) {
            const text = element.innerText;
            element.innerHTML = ''; // Clear plain text
            
            // Split into characters (looks more premium than words for a short name)
            const chars = text.split('');
            
            chars.forEach((char, index) => {
                const span = document.createElement('span');
                // Handle spaces
                if (char === ' ') {
                    span.innerHTML = '&nbsp;';
                    span.style.display = 'inline-block';
                } else {
                    span.innerText = char;
                    span.classList.add('blur-char');
                    
                    // Add transition delay for staggered effect
                    span.style.transitionDelay = `${index * 0.1}s`;
                }
                element.appendChild(span);
            });

            // Trigger the animation in the next frame to ensure styles are applied first
            requestAnimationFrame(() => {
                const spans = element.querySelectorAll('.blur-char');
                spans.forEach(span => {
                    span.classList.add('is-visible');
                });
            });
        }

        // --- SMOOTH SCROLLBAR INITIALIZATION ---
        function initSmoothScroll() {
            const container = document.querySelector('#main-scroll-container');
            if (!container) return;

            // Check if library is loaded
            if (typeof Scrollbar === 'undefined') {
                console.warn('Scrollbar library not loaded yet');
                return;
            }

            const scrollbar = Scrollbar.init(container, {
                damping: 0.05,
                renderByPixels: true,
                alwaysShowTracks: false
            });

            // Connect Dock Links to Smooth Scrollbar
            document.querySelectorAll('.dock-item, a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href') || this.querySelector('a')?.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        e.preventDefault();
                        const targetId = href.substring(1);
                        const target = document.getElementById(targetId);
                        if (target) {
                            scrollbar.scrollIntoView(target, {
                                damping: 0.05,
                                offsetTop: 50,
                            });
                        }
                    }
                });
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            initLoadingScreen(); // Start Loading Sequence
            renderProjects();
            initChromaGrid(); // New Chroma Grid for Certs
            renderAchievements(); // New: Render Achievements
            renderResearch(); // New: Render Research
            
            // Short delay to ensure libraries load
            setTimeout(() => {
                initSilkShader(); // Restore Silk Shader Background
                initTextParticles(); // NEW: Particle Text Effect
                initDock(); 
                initSmoothScroll(); 
                initLiquidGlass(); // New Effect
            }, 100);
        });

    </script>
</body>
</html>
